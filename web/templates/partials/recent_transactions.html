{{ define "recent_transactions" }}
{{if .Transactions}}
{{range .Transactions}}
<div class="transaction" data-id="{{.ID}}" data-type="{{.Type}}">
  <div class="transaction__icon transaction__icon--{{.Type}}">
    {{if eq .Type "expense"}}
    <svg viewBox="0 0 24 24"><path d="M12 22V2M7 17l5 5 5-5"/></svg>
    {{else}}
    <svg viewBox="0 0 24 24"><path d="M12 2v20M17 7l-5-5-5 5"/></svg>
    {{end}}
  </div>
  <div class="transaction__info">
    <div class="transaction__desc">{{.Description}}</div>
    <div class="transaction__cat">{{.Category}} Â· {{.Date}}</div>
  </div>
  <div class="transaction__amount transaction__amount--{{.Type}}">
    {{if eq .Type "income"}}+{{end}}{{.Amount}}
  </div>
  <button class="transaction__delete"
          hx-delete="/{{.Type}}s/{{.ID}}"
          hx-confirm="Eliminare questa {{if eq .Type "expense"}}spesa{{else}}entrata{{end}}?"
          hx-target="closest .transaction"
          hx-swap="outerHTML swap:0.2s"
          hx-on::after-request="htmx.trigger(document.body, 'dashboard:refresh')"
          aria-label="Elimina">
    <svg viewBox="0 0 24 24"><path d="M3 6h18M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"/></svg>
  </button>
</div>
{{end}}
{{else}}
<div class="empty-state">
  <p class="text-muted">Nessuna transazione recente</p>
</div>
{{end}}
{{ end }}
