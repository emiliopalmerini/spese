/* ==============================================================
   Base + variabili (Peso-style colors and design system)
============================================================== */
*, *::before, *::after { box-sizing: border-box; }
:root{
  --font: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
  
  /* Peso-inspired color system */
  --primary: #4F46E5;
  --primary-dark: #4338CA;
  --primary-light: #E0E7FF;
  --bg-light: #F9FAFB;
  --surface: #FFFFFF;
  --surface-2: #FFFFFF;
  --text: #1F2937;
  --muted: #6B7280;
  --line: #E5E7EB;
  --border: #D1D5DB;
  --accent: var(--primary);
  --accent-600: var(--primary);
  --accent-700: var(--primary-dark);
  --accent-contrast: #FFFFFF;
  --ring: 0 0 0 3px rgba(79, 70, 229, 0.1);
  
  /* Enhanced spacing and radius */
  --space-1: 4px; --space-2: 8px; --space-3: 12px; --space-4: 16px; --space-5: 24px;
  --radius: 6px; --radius-card: 12px; --radius-pill: 9999px;
  --control-pad-y: 12px; --control-pad-x: 16px;
  --container-max: 720px;
  --safe-top: env(safe-area-inset-top,0px);
  --safe-bottom: env(safe-area-inset-bottom,0px);
  
  /* Shadows for modern look */
  --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
  --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
}

/* ==============================================================
   Layout e tipografia
============================================================== */
html,body{margin:0;padding:0;font-family:var(--font);background:var(--bg-light);color:var(--text);
  -webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;line-height:1.5;}
html{font-size:16px;}
.container{max-width:var(--container-max);margin-inline:auto;padding-inline:clamp(var(--space-3),4vw,var(--space-4));}
.page{padding:calc(var(--space-4)*2) 0 calc(var(--space-4)*2.5);}
.page__section{margin-top:var(--space-4);}
.page__title{
  font-size:clamp(1.5rem,4.5vw,2rem);
  line-height:1.2;
  margin:0 0 var(--space-4);
  letter-spacing:-.01em;
  font-weight:700;
  color:var(--text);
  text-align:center;
}

/* Focus visibile */
:where(a,button,input,select,textarea):focus-visible{outline:none;box-shadow:var(--ring);}

/* Motion */
@media (prefers-reduced-motion: reduce){*{animation:none!important;transition:none!important}}

/* ==============================================================
   Topbar - Modern Navigation
============================================================== */
.topbar{
  position:sticky;
  top:0;
  z-index:100;
  background:rgba(249, 250, 251, 0.85);
  backdrop-filter:blur(12px);
  -webkit-backdrop-filter:blur(12px);
  border-bottom:1px solid var(--border);
  padding-top:var(--safe-top);
}
.topbar__inner{
  min-height:56px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:var(--space-3);
  padding-block:var(--space-2);
}
.brand{
  font-weight:700;
  font-size:1.125rem;
  letter-spacing:-0.02em;
  color:var(--text);
  display:flex;
  align-items:center;
  gap:var(--space-2);
}
.brand::before{
  content:"";
  display:inline-block;
  width:8px;
  height:8px;
  background:var(--primary);
  border-radius:2px;
}
.topbar__nav{
  display:flex;
  gap:var(--space-1);
  align-items:center;
  background:var(--surface);
  padding:4px;
  border-radius:10px;
  border:1px solid var(--border);
  box-shadow:var(--shadow-sm);
}
.nav-link{
  color:var(--muted);
  text-decoration:none;
  font-weight:500;
  font-size:0.875rem;
  padding:8px 14px;
  border-radius:6px;
  transition:all 0.2s ease;
  white-space:nowrap;
}
.nav-link:hover{
  color:var(--text);
  background:var(--bg-light);
}
.nav-link.active,
.nav-link[aria-current="page"]{
  background:var(--text);
  color:var(--surface);
  box-shadow:var(--shadow-sm);
}

/* Mobile nav adjustments */
@media (max-width: 559px) {
  .topbar__inner{
    flex-direction:column;
    gap:var(--space-2);
    padding-block:var(--space-3);
  }
  .topbar__nav{
    width:100%;
    justify-content:center;
  }
  .nav-link{
    flex:1;
    text-align:center;
    padding:10px 8px;
    font-size:0.8125rem;
  }
}

/* ==============================================================
   Form (Peso-style modern form components)
============================================================== */
.form{
  max-width:var(--container-max);
  margin:0 auto;
  background:var(--surface);
  border-radius:var(--radius-card);
  box-shadow:var(--shadow-md);
  border:1px solid var(--border);
  overflow:hidden;
}
.field{
  padding:var(--space-3) var(--space-3);
  border-bottom:1px solid var(--line);
}
@media (min-width:560px){
  .field{padding:var(--space-4) var(--space-4);}
}
.density-compact .field{padding:var(--space-2) var(--space-3);}
.field:last-child{border-bottom:0;}
.field label{
  display:block;
  font-size:0.8125rem;
  font-weight:500;
  color:var(--text);
  margin-bottom:var(--space-1);
}
@media (min-width:560px){
  .field label{font-size:0.875rem;margin-bottom:var(--space-2);}
}

input,select,button{font-size:1rem;}
input,select{
  width:100%;
  padding:var(--space-2) var(--space-3);
  min-height:40px;
  background:var(--surface);
  border:2px solid var(--border);
  border-radius:var(--radius);
  color:var(--text);
  outline:none;
  transition:all 0.2s ease;
  font-size:1rem;
}
input:focus,select:focus{
  border-color:var(--accent-600);
  box-shadow:var(--ring);
}
input::placeholder{color:var(--muted);}

/* Numerici: togli spinner */
input[type="number"]{-moz-appearance:textfield;}
input[type="number"]::-webkit-outer-spin-button,
input[type="number"]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0;}

/* Layout campi responsive */
.field-group{display:grid;grid-template-columns:1fr;gap:0;}
@media (min-width:640px){.field-group{grid-template-columns:1fr 1fr;}}
.field--half{flex:1;}

/* Field row - inline fields */
.field-row{
  display:flex;
  gap:0;
  border-bottom:1px solid var(--line);
}
.field-row .field{
  border-bottom:none;
}
.field--grow{flex:1;}

/* Date input - compact */
input[type="date"]{
  width:100%;
  min-height:36px;
  font-size:0.875rem;
}

/* Amount input - prominent */
.field--amount{
  background:var(--bg-light);
  padding:var(--space-3) var(--space-4);
}
.amount-input-wrapper{
  display:flex;
  align-items:center;
  gap:var(--space-2);
}
.amount-currency{
  font-size:1.5rem;
  font-weight:600;
  color:var(--primary);
}
.amount-input-wrapper input{
  font-size:1.5rem;
  font-weight:600;
  border:none;
  background:transparent;
  padding:var(--space-1) 0;
  min-height:auto;
}
.amount-input-wrapper input:focus{
  box-shadow:none;
  border:none;
  outline:none;
}
.amount-input-wrapper input::placeholder{
  color:var(--border);
}
@media (min-width:560px){
  .field--amount{padding:var(--space-4) var(--space-4);}
  .amount-currency,.amount-input-wrapper input{font-size:2rem;}
}

/* Category chips */
.category-picker{
  display:flex;
  flex-direction:column;
  gap:var(--space-3);
}
.category-chips,
.subcategory-chips{
  display:flex;
  flex-wrap:wrap;
  gap:var(--space-2);
}
.category-chip{
  padding:var(--space-1) var(--space-2);
  border:2px solid var(--border);
  border-radius:var(--radius-pill);
  background:var(--surface);
  color:var(--text);
  font-size:0.75rem;
  font-weight:500;
  cursor:pointer;
  transition:all 0.15s ease;
  min-height:36px;
  display:flex;
  align-items:center;
}
@media (min-width:560px){
  .category-chip{
    padding:var(--space-2) var(--space-3);
    font-size:0.875rem;
    min-height:44px;
  }
}
.category-chip:hover{
  border-color:var(--text);
  background:var(--bg-light);
}
.category-chip.active{
  background:var(--text);
  border-color:var(--text);
  color:var(--surface);
}
.category-chip--secondary{
  font-size:0.8125rem;
  padding:var(--space-1) var(--space-3);
  min-height:36px;
  animation:droplet 0.4s ease-out backwards;
}
.category-chip--secondary:nth-child(1){animation-delay:0s;}
.category-chip--secondary:nth-child(2){animation-delay:0.05s;}
.category-chip--secondary:nth-child(3){animation-delay:0.1s;}
.category-chip--secondary:nth-child(4){animation-delay:0.15s;}
.category-chip--secondary:nth-child(5){animation-delay:0.2s;}
.category-chip--secondary:nth-child(6){animation-delay:0.25s;}
.category-chip--secondary:nth-child(7){animation-delay:0.3s;}
.category-chip--secondary:nth-child(8){animation-delay:0.35s;}
.category-chip--secondary:nth-child(9){animation-delay:0.4s;}
.category-chip--secondary:nth-child(10){animation-delay:0.45s;}
@keyframes droplet{
  0%{
    opacity:0;
    transform:translateY(-20px) scale(0.8);
  }
  60%{
    transform:translateY(5px) scale(1.05);
  }
  100%{
    opacity:1;
    transform:translateY(0) scale(1);
  }
}
.category-chip--secondary.active{
  background:var(--primary);
  border-color:var(--primary);
}

/* Subcategory section */
.subcategory-section{
  margin-top:var(--space-2);
  padding-top:var(--space-3);
  border-top:1px dashed var(--border);
}

/* Alpine.js cloak */
[x-cloak]{display:none!important;}

/* Azioni responsive */
.actions{display:grid;grid-template-columns:1fr;gap:var(--space-2);margin:var(--space-2);}
@media (min-width:480px){.actions{grid-template-columns:auto auto;justify-content:start;}}

/* ==============================================================
   Bottoni (Peso-style modern buttons)
============================================================== */
.btn{
  appearance:none;
  cursor:pointer;
  border:2px solid var(--accent-600);
  padding:var(--control-pad-y) var(--control-pad-x);
  border-radius:var(--radius);
  font-weight:500;
  background:var(--surface);
  color:var(--accent-600);
  display:inline-flex;
  align-items:center;
  justify-content:center;
  gap:var(--space-2);
  min-height:44px;
  font-size:1rem;
  text-decoration:none;
  transition:all 0.2s ease;
}
.btn:hover{
  background:var(--primary-light);
  transform:translateY(-1px);
  box-shadow:var(--shadow-md);
}
.btn:active{
  transform:translateY(0);
  box-shadow:var(--shadow-sm);
}
.btn-primary{
  color:var(--accent-contrast);
  background:var(--accent-600);
  border-color:var(--accent-600);
}
.btn-primary:hover{
  background:var(--accent-700);
  border-color:var(--accent-700);
}
.btn-primary:active{
  filter:brightness(.98);
  transform:translateY(0);
}
.btn--block{width:100%}

/* ==============================================================
   Feedback (Peso-style modern alerts)
============================================================== */
.flash{margin:var(--space-4);min-height:1.5rem;}
.notifications-container{
  position:fixed;
  top:80px;
  right:var(--space-4);
  z-index:1000;
  display:flex;
  flex-direction:column;
  gap:var(--space-2);
  max-width:400px;
  width:100%;
}

.notification{
  padding:var(--space-3) var(--control-pad-x);
  border-radius:var(--radius);
  font-weight:500;
  box-shadow:var(--shadow-md);
  opacity:0;
  transform:translateX(100%);
  animation:slideInNotification 0.3s ease forwards;
  position:relative;
  margin-bottom:var(--space-2);
  cursor:pointer;
  transition:all 0.3s ease;
}

.notification__close{
  position:absolute;
  top:8px;
  right:8px;
  background:none;
  border:none;
  color:inherit;
  opacity:0.5;
  cursor:pointer;
  padding:4px;
  width:24px;
  height:24px;
  display:flex;
  align-items:center;
  justify-content:center;
  border-radius:50%;
  transition:all 0.2s ease;
}

.notification__close:hover{
  opacity:1;
  background:rgba(0,0,0,0.1);
}

.notification__close svg{
  display:block;
}

.notification:hover{
  opacity:0.95;
}

.notification[data-auto-dismiss]:not([data-auto-dismiss="0"]){
  animation:slideInNotification 0.3s ease forwards, slideOutNotification 0.3s ease 2.7s forwards;
}

@keyframes slideInNotification {
  to {
    opacity:1;
    transform:translateX(0);
  }
}

@keyframes slideOutNotification {
  to {
    opacity:0;
    transform:translateX(100%);
  }
}

.success{
  background-color:#F0FDF4;
  border:1px solid #10B981;
  border-left:4px solid #10B981;
  color:#166534;
}
.error{
  background-color:#FEF2F2;
  border:1px solid #EF4444;
  border-left:4px solid #EF4444;
  color:#991B1B;
}
.info{
  background-color:#EFF6FF;
  border:1px solid #3B82F6;
  border-left:4px solid #3B82F6;
  color:#1E3A8A;
}

/* ==============================================================
   htmx indicator
============================================================== */
.indicator{display:none;align-items:center;gap:8px;color:var(--muted);}
.htmx-request .indicator{display:inline-flex;}
.spinner{width:14px;height:14px;border-radius:999px;border:2px solid color-mix(in srgb,var(--muted) 30%, transparent);border-top-color:var(--accent);animation:spin .8s linear infinite;}
@keyframes spin{to{transform:rotate(360deg)}}

/* ==============================================================
   Caption
============================================================== */
.caption{font-size:.75rem;color:var(--muted);margin-top:4px;}

/* ==============================================================
   Temi accento
============================================================== */
.theme-emerald{--accent:#10b981;--accent-600:#059669;--accent-700:#047857;--accent-contrast:#ffffff;--ring:0 0 0 3px rgba(16,185,129,.28);}
.theme-teal{--accent:#14b8a6;--accent-600:#0d9488;--accent-700:#0f766e;--accent-contrast:#ffffff;--ring:0 0 0 3px rgba(20,184,166,.28);}
.theme-purple{--accent:#8b5cf6;--accent-600:#7c3aed;--accent-700:#6d28d9;--accent-contrast:#ffffff;--ring:0 0 0 3px rgba(139,92,246,.28);}
.theme-ink{--accent:#111111;--accent-600:#111111;--accent-700:#0a0a0a;--accent-contrast:#ffffff;--ring:0 0 0 2px rgba(17,17,17,.18);}

/* ==============================================================
   Densit√†
============================================================== */
.density-compact{
  --space-1:4px;--space-2:8px;--space-3:12px;--space-4:14px;
  --radius:8px;--radius-card:12px;--control-pad-y:8px;--control-pad-x:10px;
}
.density-comfortable{
  --space-1:8px;--space-2:12px;--space-3:16px;--space-4:22px;
  --radius:12px;--radius-card:16px;--control-pad-y:12px;--control-pad-x:16px;--container-max:840px;
}

/* ==============================================================
   Preset minimal
============================================================== */
.style-minimal{--radius:0px;--radius-card:0px;}
.style-minimal .card{box-shadow:none;}
.style-minimal .actions{gap:0;}
.style-minimal input,.style-minimal select,.style-minimal .btn,.style-minimal .success,.style-minimal .error{border-radius:0;}
.style-minimal input,.style-minimal select{background:var(--surface);}

/* ==============================================================
   Month overview (Peso-style modern card)
============================================================== */
.month-overview{
  background:var(--surface);
  border-radius:var(--radius-card);
  box-shadow:var(--shadow-md);
  border:1px solid var(--border);
  overflow:hidden;
}
.month-overview h2{
  margin:0;
  padding:var(--space-4);
  border-bottom:1px solid var(--line);
  font-size:1.125rem;
  font-weight:600;
  color:var(--text);
}
.month-overview .overview-body{padding:var(--space-4);}
.month-overview .total{
  padding:var(--space-3) 0;
  font-weight:600;
  font-size:1.125rem;
  color:var(--primary);
}
.month-overview .legend{
  color:var(--muted);
  font-size:0.875rem;
  margin-bottom:var(--space-3);
}
.month-overview .categories{border-top:1px solid var(--line);padding-top:var(--space-3);}
.month-overview .row{
  display:grid;
  grid-template-columns:1fr auto;
  align-items:center;
  padding:var(--space-3) 0;
}
.month-overview .row + .row{border-top:1px solid var(--line);}
.month-overview .row .name{color:var(--text);font-weight:500;}
.month-overview .row .amount{color:var(--text);font-variant-numeric:tabular-nums;font-weight:600;}
.month-overview .row.placeholder{color:var(--muted);}
.month-overview .row .bar{
  grid-column:1 / -1;
  height:6px;
  background:var(--line);
  margin-top:var(--space-2);
  border-radius:3px;
  overflow:hidden;
}
.month-overview .row .bar__fill{
  height:100%;
  background:var(--accent-600);
  border-radius:3px;
  transition:width 0.3s ease;
}
.month-overview .expenses{margin-top:var(--space-4);}
.month-overview .expenses h3{
  margin:var(--space-3) 0 var(--space-2);
  font-size:1rem;
  font-weight:600;
  color:var(--text);
}
.month-overview .expenses__list{display:grid;gap:var(--space-2);}

/* Card spesa: layout mobile-first a griglie (Peso-style) */
.month-overview .expense{
  display:grid;
  gap:var(--space-2);
  align-items:center;
  padding:var(--space-3) 0;
  border-bottom:2px dashed var(--line);
  grid-template-columns:1fr auto auto;
  grid-template-areas:
    "date amount actions"
    "desc amount actions"
    "cat  amount actions";
  transition:background-color 0.2s ease;
}
.month-overview .expense:hover{
  background-color:var(--bg-light);
  margin:0 calc(-1 * var(--space-4));
  padding-left:var(--space-4);
  padding-right:var(--space-4);
  border-radius:var(--radius);
}
.month-overview .expense__date{
  grid-area:date;
  color:var(--muted);
  font-variant-numeric:tabular-nums;
  font-size:0.875rem;
}
.month-overview .expense__desc{
  grid-area:desc;
  overflow:hidden;
  text-overflow:ellipsis;
  white-space:nowrap;
  font-weight:500;
  color:var(--text);
}
.month-overview .expense__cat{
  grid-area:cat;
  color:var(--muted);
  font-size:0.875rem;
}
.month-overview .expense__amt{
  grid-area:amount;
  font-weight:600;
  font-variant-numeric:tabular-nums;
  justify-self:end;
  color:var(--primary);
}
.month-overview .expense__actions{
  grid-area:actions;
  display:flex;
  opacity:0;
  transition:opacity 0.2s ease;
  justify-self:end;
}
.month-overview .expense:hover .expense__actions{
  opacity:1;
}
/* Mobile: always show delete button */
@media (max-width: 559px) {
  .month-overview .expense__actions{
    opacity:1;
  }
}
@media (min-width:560px){
  .month-overview .expense{
    grid-template-columns:64px 1fr auto auto auto;
    grid-template-areas:"date desc cat amount actions";
  }
}

/* ==============================================================
   Data Tables
============================================================== */
.data-table{
  width:100%;
  background:var(--surface);
  border-radius:var(--radius-card);
  box-shadow:var(--shadow-md);
  border:1px solid var(--border);
  overflow:hidden;
}
.data-table thead{
  background:var(--bg-light);
  border-bottom:2px solid var(--border);
}
.data-table th{
  padding:var(--space-3) var(--space-4);
  text-align:left;
  font-weight:600;
  font-size:0.875rem;
  color:var(--text);
  text-transform:uppercase;
  letter-spacing:0.025em;
}
.data-table tbody tr{
  border-bottom:1px solid var(--line);
  transition:background-color 0.2s ease;
}
.data-table tbody tr:hover{
  background:var(--bg-light);
}
.data-table tbody tr:last-child{
  border-bottom:none;
}
.data-table td{
  padding:var(--space-3) var(--space-4);
  color:var(--text);
}
.expense-description{font-weight:500;}
.expense-amount{font-weight:600;color:var(--primary);font-variant-numeric:tabular-nums;}
.expense-frequency{font-size:0.875rem;}
.expense-date{font-size:0.875rem;color:var(--muted);font-variant-numeric:tabular-nums;}
.expense-category{font-size:0.875rem;}
.category-badge{
  display:inline-block;
  padding:2px 8px;
  background:var(--primary-light);
  color:var(--primary);
  border-radius:var(--radius);
  font-weight:500;
  font-size:0.75rem;
  margin-right:var(--space-1);
}
.subcategory-badge{
  display:inline-block;
  padding:2px 8px;
  background:var(--bg-light);
  color:var(--muted);
  border-radius:var(--radius);
  font-size:0.75rem;
}
.expense-actions{
  white-space:nowrap;
}
.expense-actions .btn{
  margin-right:var(--space-2);
}

/* ==============================================================
   Button Variants
============================================================== */
.btn-secondary{
  background:var(--surface);
  color:var(--text);
  border:2px solid var(--border);
}
.btn-secondary:hover{
  background:var(--bg-light);
  border-color:var(--muted);
}
.btn-danger{
  background:#FEE2E2;
  color:#991B1B;
  border:2px solid #EF4444;
}
.btn-danger:hover{
  background:#EF4444;
  color:white;
  border-color:#DC2626;
}
.btn-sm{
  padding:6px 12px;
  font-size:0.875rem;
  min-height:32px;
}

/* ==============================================================
   Section Titles
============================================================== */
.section-title{
  font-size:1.25rem;
  font-weight:600;
  color:var(--text);
  margin:var(--space-4) 0;
  padding-bottom:var(--space-2);
  border-bottom:2px solid var(--line);
}

/* ==============================================================
   Empty State
============================================================== */
.empty-state{
  text-align:center;
  padding:calc(var(--space-4)*3) var(--space-4);
  background:var(--surface);
  border-radius:var(--radius-card);
  border:1px solid var(--border);
}
.empty-state p{
  margin:var(--space-2) 0;
}
.text-muted{
  color:var(--muted);
}

/* ==============================================================
   Recurrent Expenses - using same style as normal expenses
============================================================== */
.recurrent-expenses{
  background:var(--surface);
  border-radius:var(--radius-card);
  box-shadow:var(--shadow-md);
  border:1px solid var(--border);
  overflow:hidden;
  margin-top:var(--space-4);
}
.recurrent-expenses h2{
  margin:0;
  padding:var(--space-4);
  border-bottom:1px solid var(--line);
  font-size:1.125rem;
  font-weight:600;
  color:var(--text);
}
.recurrent-list{
  padding:var(--space-4);
  display:grid;
  gap:var(--space-2);
}

/* Recurrent expense item - same style as .month-overview .expense */
.recurrent-item{
  display:grid;
  gap:var(--space-2);
  align-items:center;
  padding:var(--space-3) 0;
  border-bottom:2px dashed var(--line);
  grid-template-columns:1fr auto auto;
  grid-template-areas:
    "freq  amount actions"
    "desc  amount actions"
    "cat   amount actions"
    "dates amount actions";
  transition:background-color 0.2s ease;
  position:relative;
}
.recurrent-item:hover{
  background-color:var(--bg-light);
  margin:0 calc(-1 * var(--space-4));
  padding-left:var(--space-4);
  padding-right:var(--space-4);
  padding-top:var(--space-3);
  padding-bottom:var(--space-3);
  border-radius:var(--radius);
}
.recurrent-item--editing:hover{
  margin:0 calc(-1 * var(--space-4));
  padding-left:var(--space-4);
  padding-right:var(--space-4);
  border-radius:var(--radius);
}
.recurrent-item:last-child{
  border-bottom:none;
}

/* Grid areas for recurrent expense data */
.recurrent-frequency{
  grid-area:freq;
  font-weight:500;
  color:var(--text);
  background:var(--bg-light);
  padding:2px 8px;
  border-radius:var(--radius);
  border:1px solid var(--border);
  font-size:0.875rem;
  width:fit-content;
}
.recurrent-description{
  grid-area:desc;
  overflow:hidden;
  text-overflow:ellipsis;
  white-space:nowrap;
  font-weight:500;
  color:var(--text);
  margin:0;
}
.recurrent-categories{
  grid-area:cat;
  color:var(--muted);
  font-size:0.875rem;
}
.recurrent-dates{
  grid-area:dates;
  color:var(--muted);
  font-variant-numeric:tabular-nums;
  font-size:0.875rem;
}
.recurrent-amount{
  grid-area:amount;
  font-weight:600;
  font-variant-numeric:tabular-nums;
  justify-self:end;
  color:var(--primary);
  font-size:1rem;
}

/* Action icons */
.recurrent-actions{
  grid-area:actions;
  display:flex;
  gap:var(--space-1);
  opacity:0;
  transition:opacity 0.2s ease;
  justify-self:end;
}
.recurrent-item:hover .recurrent-actions{
  opacity:1;
}

.action-icon{
  width:32px;
  height:32px;
  border:none;
  background:transparent;
  cursor:pointer;
  border-radius:var(--radius);
  padding:6px;
  transition:all 0.15s ease;
  display:flex;
  align-items:center;
  justify-content:center;
}
.action-icon:hover{
  background:var(--text);
  color:var(--surface);
}
.action-icon svg{
  width:20px;
  height:20px;
  stroke:currentColor;
  fill:none;
  stroke-width:2;
  stroke-linecap:round;
  stroke-linejoin:round;
}

/* Category styling */
.category-primary{
  font-weight:500;
  color:var(--text);
}
.category-separator{
  color:var(--muted);
  margin:0 4px;
}
.category-secondary{
  color:var(--muted);
}

/* Mobile responsive - same as normal expenses */
@media (min-width:560px){
  .recurrent-item{
    grid-template-columns:120px 1fr auto auto auto;
    grid-template-areas:"freq desc cat amount actions";
  }
  .recurrent-dates{
    display:none; /* Hide dates on desktop to save space */
  }
}

/* Mobile: show actions always */
@media (max-width: 559px) {
  .recurrent-actions{
    opacity:1;
    position:absolute;
    top:var(--space-1);
    right:0;
  }
  .action-icon{
    background:var(--bg-light);
    border:1px solid var(--border);
  }
}

/* ==============================================================
   Seamless Inline Editing - Maintains Row Layout
============================================================== */

/* Editing state - maintains grid layout */
.recurrent-item--editing{
  background:var(--bg-light) !important;
  border-color:var(--text) !important;
  border-width:2px !important;
  animation:editModeIn 0.2s ease-out;
  min-height:var(--space-16);
}
.recurrent-item--editing:hover{
  background:var(--bg-light) !important;
  border-color:var(--text) !important;
}

@keyframes editModeIn {
  from { background:var(--surface); border-color:var(--border); }
  to { background:var(--bg-light); border-color:var(--text); }
}

/* Form maintains exact grid layout - identical to normal row */
.recurrent-edit-inline{
  display:grid;
  gap:var(--space-2);
  align-items:center;
  padding:var(--space-3) 0;
  width:100%;
  grid-template-columns:1fr auto auto;
  grid-template-areas:
    "freq  amount actions"
    "desc  amount actions"
    "cat   amount actions"
    "dates amount actions";
  transition:all 0.2s ease;
  position:relative;
}

/* Editable frequency - looks like badge but is select */
.recurrent-frequency--editing{
  grid-area:freq;
  font-weight:500;
  color:var(--text);
  background:var(--surface);
  padding:2px 8px;
  border:1px solid var(--text);
  border-radius:var(--radius);
  font-size:0.875rem;
  width:fit-content;
  cursor:pointer;
  transition:all 0.15s ease;
}
.recurrent-frequency--editing:focus{
  outline:none;
  box-shadow:0 0 0 2px rgba(31, 41, 55, 0.1);
}

/* Editable description - invisible input that looks like text */
.recurrent-description--editing{
  grid-area:desc;
  background:transparent;
  border:none;
  border-bottom:1px dashed var(--muted);
  padding:2px 4px;
  font-weight:500;
  color:var(--text);
  font-size:inherit;
  font-family:inherit;
  width:100%;
  transition:all 0.15s ease;
}
.recurrent-description--editing:focus{
  outline:none;
  border-bottom-color:var(--text);
  border-bottom-style:solid;
  background:var(--surface);
}

/* Editable categories - inline selects */
.recurrent-categories--editing{
  grid-area:cat;
  display:flex;
  align-items:center;
  gap:4px;
  font-size:0.875rem;
}
.category-select{
  background:transparent;
  border:none;
  border-bottom:1px dashed var(--muted);
  padding:2px 4px;
  font-size:0.875rem;
  font-family:inherit;
  color:var(--text);
  cursor:pointer;
  transition:all 0.15s ease;
}
.category-primary--editing{
  font-weight:500;
}
.category-secondary--editing{
  color:var(--muted);
}
.category-select:focus{
  outline:none;
  border-bottom-color:var(--text);
  border-bottom-style:solid;
  background:var(--surface);
}

/* Editable dates - compact inline inputs */
.recurrent-dates--editing{
  grid-area:dates;
  display:flex;
  align-items:center;
  gap:var(--space-1);
  color:var(--muted);
  font-variant-numeric:tabular-nums;
  font-size:0.875rem;
  flex-wrap:wrap;
}
.date-label{
  font-size:0.8125rem;
  color:var(--muted);
}
.date-input{
  background:transparent;
  border:none;
  border-bottom:1px dashed var(--muted);
  padding:2px 4px;
  font-size:0.8125rem;
  font-family:inherit;
  color:var(--muted);
  width:90px;
  font-variant-numeric:tabular-nums;
  transition:all 0.15s ease;
}
.date-input:focus{
  outline:none;
  border-bottom-color:var(--text);
  border-bottom-style:solid;
  background:var(--surface);
  color:var(--text);
}
.date-input--optional{
  border-bottom-style:dotted;
  width:100px;
}
.date-endless{
  font-style:italic;
  color:var(--muted);
  font-size:0.8125rem;
}

/* Editable amount - maintains blue styling */
.recurrent-amount--editing{
  grid-area:amount;
  display:flex;
  align-items:center;
  font-weight:600;
  font-variant-numeric:tabular-nums;
  justify-self:end;
  color:var(--primary);
  font-size:1rem;
}
.amount-currency{
  color:var(--primary);
  font-weight:600;
  margin-right:2px;
}
.amount-input{
  background:transparent;
  border:none;
  border-bottom:1px dashed var(--primary);
  padding:2px 4px;
  color:var(--primary);
  font-weight:600;
  font-variant-numeric:tabular-nums;
  font-size:1rem;
  font-family:inherit;
  width:80px;
  text-align:right;
  transition:all 0.15s ease;
}
.amount-input:focus{
  outline:none;
  border-bottom-style:solid;
  background:var(--surface);
}

/* Enhanced edit actions - compact and refined */
.recurrent-actions--editing{
  grid-area:actions;
  display:flex;
  align-items:center;
  gap:var(--space-1);
  justify-self:end;
}

.edit-action-btn{
  width:28px;
  height:28px;
  border:1px solid var(--border);
  background:var(--surface);
  border-radius:var(--radius);
  cursor:pointer;
  display:flex;
  align-items:center;
  justify-content:center;
  transition:all 0.15s ease;
}
.edit-action-btn:hover{
  border-color:var(--text);
  transform:translateY(-1px);
  box-shadow:0 2px 8px rgba(0,0,0,0.1);
}

.edit-action-btn--save{
  background:var(--text);
  border-color:var(--text);
  color:var(--surface);
}
.edit-action-btn--save:hover{
  background:var(--muted);
  border-color:var(--muted);
}

.edit-action-btn--cancel{
  background:var(--surface);
  border-color:var(--muted);
  color:var(--muted);
}
.edit-action-btn--cancel:hover{
  background:var(--bg-light);
  color:var(--text);
  border-color:var(--text);
}

.edit-action-icon{
  width:16px;
  height:16px;
  stroke:currentColor;
  fill:none;
  stroke-width:2;
  stroke-linecap:round;
  stroke-linejoin:round;
}

/* Saving indicator */
.edit-saving-indicator{
  display:flex;
  align-items:center;
  margin-left:var(--space-1);
}
.saving-spinner{
  width:16px;
  height:16px;
  border:2px solid var(--line);
  border-top-color:var(--primary);
  border-radius:50%;
  animation:spin 1s linear infinite;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

/* Mobile responsive - stack vertically but maintain feel */
@media (min-width:560px){
  .recurrent-edit-inline{
    grid-template-columns:120px 1fr auto auto auto;
    grid-template-areas:"freq desc cat amount actions";
    width:100%;
  }
  .recurrent-dates--editing{
    display:none; /* Hide dates on desktop like normal view */
  }
}

/* Mobile: show actions always and make touch-friendly */
@media (max-width: 559px) {
  .recurrent-actions--editing{
    opacity:1;
    position:absolute;
    top:var(--space-1);
    right:var(--space-2);
  }
  .edit-action-btn{
    width:32px;
    height:32px;
    background:var(--bg-light);
    border-color:var(--border);
  }
  .recurrent-dates--editing{
    font-size:0.8125rem;
  }
  .date-input{
    width:70px;
    font-size:0.75rem;
  }
}


/* ==============================================================
   Data Tables
============================================================== */
.data-table{
  width:100%;
  background:var(--surface);
  border-radius:var(--radius-card);
  box-shadow:var(--shadow-md);
  border:1px solid var(--border);
  overflow:hidden;
}
.data-table thead{
  background:var(--bg-light);
  border-bottom:2px solid var(--border);
}
.data-table th{
  padding:var(--space-3) var(--space-4);
  text-align:left;
  font-weight:600;
  font-size:0.875rem;
  color:var(--text);
  text-transform:uppercase;
  letter-spacing:0.025em;
}
.data-table tbody tr{
  border-bottom:1px solid var(--line);
  transition:background-color 0.2s ease;
}
.data-table tbody tr:hover{
  background:var(--bg-light);
}
.data-table tbody tr:last-child{
  border-bottom:none;
}
.data-table td{
  padding:var(--space-3) var(--space-4);
  color:var(--text);
}
.expense-description{font-weight:500;}
.expense-amount{font-weight:600;color:var(--primary);font-variant-numeric:tabular-nums;}
.expense-frequency{font-size:0.875rem;}
.expense-date{font-size:0.875rem;color:var(--muted);font-variant-numeric:tabular-nums;}
.expense-category{font-size:0.875rem;}
.category-badge{
  display:inline-block;
  padding:2px 8px;
  background:var(--primary-light);
  color:var(--primary);
  border-radius:var(--radius);
  font-weight:500;
  font-size:0.75rem;
  margin-right:var(--space-1);
}
.subcategory-badge{
  display:inline-block;
  padding:2px 8px;
  background:var(--bg-light);
  color:var(--muted);
  border-radius:var(--radius);
  font-size:0.75rem;
}
.expense-actions{
  white-space:nowrap;
}
.expense-actions .btn{
  margin-right:var(--space-2);
}

/* ==============================================================
   Button Variants
============================================================== */
.btn-secondary{
  background:var(--surface);
  color:var(--text);
  border:2px solid var(--border);
}
.btn-secondary:hover{
  background:var(--bg-light);
  border-color:var(--muted);
}
.btn-danger{
  background:#FEE2E2;
  color:#991B1B;
  border:2px solid #EF4444;
}
.btn-danger:hover{
  background:#EF4444;
  color:white;
  border-color:#DC2626;
}
.btn-sm{
  padding:6px 12px;
  font-size:0.875rem;
  min-height:32px;
}

/* ==============================================================
   Section Titles
============================================================== */
.section-title{
  font-size:1.25rem;
  font-weight:600;
  color:var(--text);
  margin:var(--space-4) 0;
  padding-bottom:var(--space-2);
  border-bottom:2px solid var(--line);
}

/* ==============================================================
   Empty State
============================================================== */
.empty-state{
  text-align:center;
  padding:calc(var(--space-4)*3) var(--space-4);
  background:var(--surface);
  border-radius:var(--radius-card);
  border:1px solid var(--border);
}
.empty-state p{
  margin:var(--space-2) 0;
}
.text-muted{
  color:var(--muted);
}

/* ==============================================================
   Recurrent Expenses - using same style as normal expenses
============================================================== */
.recurrent-expenses{
  background:var(--surface);
  border-radius:var(--radius-card);
  box-shadow:var(--shadow-md);
  border:1px solid var(--border);
  overflow:hidden;
  margin-top:var(--space-4);
}
.recurrent-expenses h2{
  margin:0;
  padding:var(--space-4);
  border-bottom:1px solid var(--line);
  font-size:1.125rem;
  font-weight:600;
  color:var(--text);
}
.recurrent-list{
  padding:var(--space-4);
  display:grid;
  gap:var(--space-2);
}

/* Recurrent expense item - same style as .month-overview .expense */
.recurrent-item{
  display:grid;
  gap:var(--space-2);
  align-items:center;
  padding:var(--space-3) 0;
  border-bottom:2px dashed var(--line);
  grid-template-columns:1fr auto auto;
  grid-template-areas:
    "freq  amount actions"
    "desc  amount actions"
    "cat   amount actions"
    "dates amount actions";
  transition:background-color 0.2s ease;
  position:relative;
}
.recurrent-item:hover{
  background-color:var(--bg-light);
  margin:0 calc(-1 * var(--space-4));
  padding-left:var(--space-4);
  padding-right:var(--space-4);
  padding-top:var(--space-3);
  padding-bottom:var(--space-3);
  border-radius:var(--radius);
}
.recurrent-item--editing:hover{
  margin:0 calc(-1 * var(--space-4));
  padding-left:var(--space-4);
  padding-right:var(--space-4);
  border-radius:var(--radius);
}
.recurrent-item:last-child{
  border-bottom:none;
}

/* Grid areas for recurrent expense data */
.recurrent-frequency{
  grid-area:freq;
  font-weight:500;
  color:var(--text);
  background:var(--bg-light);
  padding:2px 8px;
  border-radius:var(--radius);
  border:1px solid var(--border);
  font-size:0.875rem;
  width:fit-content;
}
.recurrent-description{
  grid-area:desc;
  overflow:hidden;
  text-overflow:ellipsis;
  white-space:nowrap;
  font-weight:500;
  color:var(--text);
  margin:0;
}
.recurrent-categories{
  grid-area:cat;
  color:var(--muted);
  font-size:0.875rem;
}
.recurrent-dates{
  grid-area:dates;
  color:var(--muted);
  font-variant-numeric:tabular-nums;
  font-size:0.875rem;
}
.recurrent-amount{
  grid-area:amount;
  font-weight:600;
  font-variant-numeric:tabular-nums;
  justify-self:end;
  color:var(--primary);
  font-size:1rem;
}

/* Action icons */
.recurrent-actions{
  grid-area:actions;
  display:flex;
  gap:var(--space-1);
  opacity:0;
  transition:opacity 0.2s ease;
  justify-self:end;
}
.recurrent-item:hover .recurrent-actions{
  opacity:1;
}

.action-icon{
  width:32px;
  height:32px;
  border:none;
  background:transparent;
  cursor:pointer;
  border-radius:var(--radius);
  padding:6px;
  transition:all 0.15s ease;
  display:flex;
  align-items:center;
  justify-content:center;
}
.action-icon:hover{
  background:var(--text);
  color:var(--surface);
}
.action-icon svg{
  width:20px;
  height:20px;
  stroke:currentColor;
  fill:none;
  stroke-width:2;
  stroke-linecap:round;
  stroke-linejoin:round;
}

/* Category styling */
.category-primary{
  font-weight:500;
  color:var(--text);
}
.category-separator{
  color:var(--muted);
  margin:0 4px;
}
.category-secondary{
  color:var(--muted);
}

/* Mobile responsive - same as normal expenses */
@media (min-width:560px){
  .recurrent-item{
    grid-template-columns:120px 1fr auto auto auto;
    grid-template-areas:"freq desc cat amount actions";
  }
  .recurrent-dates{
    display:none; /* Hide dates on desktop to save space */
  }
}

/* Mobile: show actions always */
@media (max-width: 559px) {
  .recurrent-actions{
    opacity:1;
    position:absolute;
    top:var(--space-1);
    right:0;
  }
  .action-icon{
    background:var(--bg-light);
    border:1px solid var(--border);
  }
}

/* ==============================================================
   Seamless Inline Editing - Maintains Row Layout
============================================================== */

/* Editing state - maintains grid layout */
.recurrent-item--editing{
  background:var(--bg-light) !important;
  border-color:var(--text) !important;
  border-width:2px !important;
  animation:editModeIn 0.2s ease-out;
  min-height:var(--space-16);
}
.recurrent-item--editing:hover{
  background:var(--bg-light) !important;
  border-color:var(--text) !important;
}

@keyframes editModeIn {
  from { background:var(--surface); border-color:var(--border); }
  to { background:var(--bg-light); border-color:var(--text); }
}

/* Form maintains exact grid layout - identical to normal row */
.recurrent-edit-inline{
  display:grid;
  gap:var(--space-2);
  align-items:center;
  padding:var(--space-3) 0;
  width:100%;
  grid-template-columns:1fr auto auto;
  grid-template-areas:
    "freq  amount actions"
    "desc  amount actions"
    "cat   amount actions"
    "dates amount actions";
  transition:all 0.2s ease;
  position:relative;
}

/* Editable frequency - looks like badge but is select */
.recurrent-frequency--editing{
  grid-area:freq;
  font-weight:500;
  color:var(--text);
  background:var(--surface);
  padding:2px 8px;
  border:1px solid var(--text);
  border-radius:var(--radius);
  font-size:0.875rem;
  width:fit-content;
  cursor:pointer;
  transition:all 0.15s ease;
}
.recurrent-frequency--editing:focus{
  outline:none;
  box-shadow:0 0 0 2px rgba(31, 41, 55, 0.1);
}

/* Editable description - invisible input that looks like text */
.recurrent-description--editing{
  grid-area:desc;
  background:transparent;
  border:none;
  border-bottom:1px dashed var(--muted);
  padding:2px 4px;
  font-weight:500;
  color:var(--text);
  font-size:inherit;
  font-family:inherit;
  width:100%;
  transition:all 0.15s ease;
}
.recurrent-description--editing:focus{
  outline:none;
  border-bottom-color:var(--text);
  border-bottom-style:solid;
  background:var(--surface);
}

/* Editable categories - inline selects */
.recurrent-categories--editing{
  grid-area:cat;
  display:flex;
  align-items:center;
  gap:4px;
  font-size:0.875rem;
}
.category-select{
  background:transparent;
  border:none;
  border-bottom:1px dashed var(--muted);
  padding:2px 4px;
  font-size:0.875rem;
  font-family:inherit;
  color:var(--text);
  cursor:pointer;
  transition:all 0.15s ease;
}
.category-primary--editing{
  font-weight:500;
}
.category-secondary--editing{
  color:var(--muted);
}
.category-select:focus{
  outline:none;
  border-bottom-color:var(--text);
  border-bottom-style:solid;
  background:var(--surface);
}

/* Editable dates - compact inline inputs */
.recurrent-dates--editing{
  grid-area:dates;
  display:flex;
  align-items:center;
  gap:var(--space-1);
  color:var(--muted);
  font-variant-numeric:tabular-nums;
  font-size:0.875rem;
  flex-wrap:wrap;
}
.date-label{
  font-size:0.8125rem;
  color:var(--muted);
}
.date-input{
  background:transparent;
  border:none;
  border-bottom:1px dashed var(--muted);
  padding:2px 4px;
  font-size:0.8125rem;
  font-family:inherit;
  color:var(--muted);
  width:90px;
  font-variant-numeric:tabular-nums;
  transition:all 0.15s ease;
}
.date-input:focus{
  outline:none;
  border-bottom-color:var(--text);
  border-bottom-style:solid;
  background:var(--surface);
  color:var(--text);
}
.date-input--optional{
  border-bottom-style:dotted;
  width:100px;
}
.date-endless{
  font-style:italic;
  color:var(--muted);
  font-size:0.8125rem;
}

/* Editable amount - maintains blue styling */
.recurrent-amount--editing{
  grid-area:amount;
  display:flex;
  align-items:center;
  font-weight:600;
  font-variant-numeric:tabular-nums;
  justify-self:end;
  color:var(--primary);
  font-size:1rem;
}
.amount-currency{
  color:var(--primary);
  font-weight:600;
  margin-right:2px;
}
.amount-input{
  background:transparent;
  border:none;
  border-bottom:1px dashed var(--primary);
  padding:2px 4px;
  color:var(--primary);
  font-weight:600;
  font-variant-numeric:tabular-nums;
  font-size:1rem;
  font-family:inherit;
  width:80px;
  text-align:right;
  transition:all 0.15s ease;
}
.amount-input:focus{
  outline:none;
  border-bottom-style:solid;
  background:var(--surface);
}

/* Enhanced edit actions - compact and refined */
.recurrent-actions--editing{
  grid-area:actions;
  display:flex;
  align-items:center;
  gap:var(--space-1);
  justify-self:end;
}

.edit-action-btn{
  width:28px;
  height:28px;
  border:1px solid var(--border);
  background:var(--surface);
  border-radius:var(--radius);
  cursor:pointer;
  display:flex;
  align-items:center;
  justify-content:center;
  transition:all 0.15s ease;
}
.edit-action-btn:hover{
  border-color:var(--text);
  transform:translateY(-1px);
  box-shadow:0 2px 8px rgba(0,0,0,0.1);
}

.edit-action-btn--save{
  background:var(--text);
  border-color:var(--text);
  color:var(--surface);
}
.edit-action-btn--save:hover{
  background:var(--muted);
  border-color:var(--muted);
}

.edit-action-btn--cancel{
  background:var(--surface);
  border-color:var(--muted);
  color:var(--muted);
}
.edit-action-btn--cancel:hover{
  background:var(--bg-light);
  color:var(--text);
  border-color:var(--text);
}

.edit-action-icon{
  width:16px;
  height:16px;
  stroke:currentColor;
  fill:none;
  stroke-width:2;
  stroke-linecap:round;
  stroke-linejoin:round;
}

/* Saving indicator */
.edit-saving-indicator{
  display:flex;
  align-items:center;
  margin-left:var(--space-1);
}
.saving-spinner{
  width:16px;
  height:16px;
  border:2px solid var(--line);
  border-top-color:var(--primary);
  border-radius:50%;
  animation:spin 1s linear infinite;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

/* Mobile responsive - stack vertically but maintain feel */
@media (min-width:560px){
  .recurrent-edit-inline{
    grid-template-columns:120px 1fr auto auto auto;
    grid-template-areas:"freq desc cat amount actions";
    width:100%;
  }
  .recurrent-dates--editing{
    display:none; /* Hide dates on desktop like normal view */
  }
}

/* Mobile: show actions always and make touch-friendly */
@media (max-width: 559px) {
  .recurrent-actions--editing{
    opacity:1;
    position:absolute;
    top:var(--space-1);
    right:var(--space-2);
  }
  .edit-action-btn{
    width:32px;
    height:32px;
    background:var(--bg-light);
    border-color:var(--border);
  }
  .recurrent-dates--editing{
    font-size:0.8125rem;
  }
  .date-input{
    width:70px;
    font-size:0.75rem;
  }
}


/* ==============================================================
   Scrollbar sottili
============================================================== */
*{scrollbar-width:thin;scrollbar-color:color-mix(in srgb,var(--muted) 40%, transparent) transparent;}
*::-webkit-scrollbar{height:8px;width:8px;}
*::-webkit-scrollbar-thumb{background:color-mix(in srgb,var(--muted) 40%, transparent);}
*::-webkit-scrollbar-track{background:transparent;}


/* ==============================================================
   Expense Actions
============================================================== */
.expense__actions{
  display:flex;
  gap:var(--space-1);
  align-items:center;
}

.action-icon{
  appearance:none;
  background:none;
  border:none;
  padding:var(--space-1);
  border-radius:var(--radius);
  cursor:pointer;
  color:var(--muted);
  transition:all 0.2s ease;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  width:32px;
  height:32px;
}

.action-icon:hover{
  background:var(--border);
  color:var(--text);
}

.delete-btn:hover{
  background:#FEE2E2;
  color:#DC2626;
}

.delete-btn svg{
  transition:transform 0.2s ease;
}

.delete-btn:hover svg{
  transform:scale(1.1);
}

/* Slide out animation for deleted items */
.expense.deleting{
  opacity:0;
  transform:translateX(-100%);
  transition:all 0.3s ease;
}

/* ==============================================================
   Dashboard - Stat Hero (main stat card)
============================================================== */
.stat-hero{
  background:var(--surface);
  border:1px solid var(--border);
  border-radius:var(--radius-card);
  padding:var(--space-5);
  text-align:center;
  box-shadow:var(--shadow-md);
}
.stat-hero__value{
  font-size:2.5rem;
  font-weight:700;
  color:var(--text);
  font-variant-numeric:tabular-nums;
  letter-spacing:-0.02em;
  line-height:1.1;
}
.stat-hero__label{
  font-size:0.875rem;
  font-weight:500;
  color:var(--muted);
  margin-top:var(--space-1);
  text-transform:uppercase;
  letter-spacing:0.05em;
}
.stat-hero__trend{
  display:inline-flex;
  align-items:center;
  gap:4px;
  font-size:0.875rem;
  font-weight:600;
  margin-top:var(--space-2);
  padding:4px 10px;
  border-radius:20px;
}
.stat-hero__trend--down{
  background:rgba(16, 185, 129, 0.1);
  color:#059669;
}
.stat-hero__trend--up{
  background:rgba(239, 68, 68, 0.1);
  color:#DC2626;
}
.stat-hero__trend--neutral{
  background:var(--bg-light);
  color:var(--muted);
}
.stat-hero__meta{
  font-size:0.875rem;
  color:var(--muted);
  margin-top:var(--space-2);
}
.stat-hero--empty .stat-hero__value{
  color:var(--muted);
}

/* ==============================================================
   Dashboard - Stat Pills (secondary stats grid)
============================================================== */
.stat-pills{
  display:grid;
  grid-template-columns:repeat(2, 1fr);
  gap:var(--space-3);
}
.stat-pill{
  background:var(--surface);
  border:1px solid var(--border);
  border-radius:var(--radius-card);
  padding:var(--space-4);
  text-align:center;
  box-shadow:var(--shadow-sm);
}
.stat-pill__label{
  font-size:0.75rem;
  font-weight:500;
  color:var(--muted);
  text-transform:uppercase;
  letter-spacing:0.05em;
  margin-bottom:var(--space-1);
}
.stat-pill__value{
  font-size:1.25rem;
  font-weight:700;
  color:var(--text);
  font-variant-numeric:tabular-nums;
}
.stat-pill__value--positive{
  color:#059669;
}
.stat-pill__value--negative{
  color:#DC2626;
}
.stat-pill--empty .stat-pill__value{
  color:var(--muted);
}

/* ==============================================================
   Dashboard - Chart Container
============================================================== */
.chart-section{
  background:var(--surface);
  border:1px solid var(--border);
  border-radius:var(--radius-card);
  padding:var(--space-4);
  box-shadow:var(--shadow-md);
}
.chart-section__header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:var(--space-3);
  flex-wrap:wrap;
  gap:var(--space-2);
}
.chart-section__title{
  font-size:1rem;
  font-weight:600;
  color:var(--text);
  margin:0;
}
.chart-container{
  position:relative;
  height:280px;
}
@media (min-width:560px){
  .chart-container{
    height:320px;
  }
}
.chart-grid{
  display:grid;
  gap:var(--space-4);
}
@media (min-width:640px){
  .chart-grid{
    grid-template-columns:2fr 1fr;
  }
}
.chart-wrapper{
  position:relative;
  min-height:200px;
  width:100%;
  display:flex;
  justify-content:center;
  align-items:center;
}
.chart-wrapper canvas{
  max-width:100%;
}

/* ==============================================================
   Dashboard - Period Chips (time range selector)
============================================================== */
.period-chips{
  display:flex;
  gap:6px;
  overflow-x:auto;
  scrollbar-width:none;
  -ms-overflow-style:none;
  padding:4px 0;
  margin:-4px 0;
}
.period-chips::-webkit-scrollbar{
  display:none;
}
.period-chip{
  flex-shrink:0;
  padding:8px 14px;
  border:1px solid var(--border);
  border-radius:20px;
  background:var(--surface);
  color:var(--muted);
  font-size:0.8125rem;
  font-weight:500;
  cursor:pointer;
  transition:all 0.15s ease;
  -webkit-tap-highlight-color:transparent;
}
.period-chip:hover{
  border-color:var(--text);
  color:var(--text);
}
.period-chip--active{
  background:var(--text);
  border-color:var(--text);
  color:var(--surface);
}

/* ==============================================================
   Dashboard - FAB Speed Dial
============================================================== */
.fab-container{
  position:fixed;
  bottom:calc(24px + var(--safe-bottom));
  right:24px;
  z-index:90;
  display:flex;
  flex-direction:column;
  align-items:flex-end;
}
.fab{
  width:56px;
  height:56px;
  border-radius:16px;
  background:var(--text);
  color:var(--surface);
  border:none;
  box-shadow:0 4px 12px rgba(0, 0, 0, 0.15), 0 2px 4px rgba(0, 0, 0, 0.1);
  cursor:pointer;
  display:flex;
  align-items:center;
  justify-content:center;
  transition:transform 0.2s ease, box-shadow 0.2s ease, opacity 0.2s ease;
  -webkit-tap-highlight-color:transparent;
  touch-action:manipulation;
}
.fab:hover{
  transform:scale(1.05);
  box-shadow:0 6px 16px rgba(0, 0, 0, 0.2), 0 3px 6px rgba(0, 0, 0, 0.1);
}
.fab:active{
  transform:scale(0.95);
}
.fab--hidden{
  transform:translateY(100px);
  opacity:0;
  pointer-events:none;
}
.fab__icon{
  width:24px;
  height:24px;
  stroke:currentColor;
  stroke-width:2.5;
  fill:none;
  transition:transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}
.fab--open .fab__icon{
  transform:rotate(45deg);
}

/* FAB Speed Dial Actions */
.fab-actions{
  position:absolute;
  bottom:72px;
  right:0;
  display:flex;
  flex-direction:column;
  align-items:flex-end;
  gap:var(--space-3);
  opacity:0;
  visibility:hidden;
  transform:translateY(10px);
  transition:all 0.2s ease;
  pointer-events:none;
}
.fab-actions--open{
  opacity:1;
  visibility:visible;
  transform:translateY(0);
  pointer-events:auto;
}
.fab-action{
  display:flex;
  align-items:center;
  gap:var(--space-2);
}
.fab-action__btn{
  width:48px;
  height:48px;
  border-radius:12px;
  background:var(--surface);
  border:1px solid var(--border);
  box-shadow:var(--shadow-md);
  cursor:pointer;
  display:flex;
  align-items:center;
  justify-content:center;
  transition:all 0.15s ease;
  color:var(--text);
}
.fab-action__btn:hover{
  transform:scale(1.05);
  box-shadow:0 6px 16px rgba(0, 0, 0, 0.15);
  background:var(--bg-light);
}
.fab-action__btn svg{
  width:20px;
  height:20px;
  stroke:currentColor;
  stroke-width:2;
  fill:none;
}
.fab-action__label{
  padding:6px 12px;
  background:var(--text);
  color:var(--surface);
  border-radius:6px;
  font-size:0.8125rem;
  font-weight:500;
  white-space:nowrap;
  box-shadow:var(--shadow-sm);
}

/* FAB Backdrop */
.fab-backdrop{
  position:fixed;
  inset:0;
  background:rgba(0, 0, 0, 0.3);
  z-index:89;
  opacity:0;
  visibility:hidden;
  transition:all 0.2s ease;
}
.fab-backdrop--open{
  opacity:1;
  visibility:visible;
}

/* FAB pulse animation on success */
@keyframes fab-pulse {
  0% { box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15), 0 0 0 0 rgba(17, 17, 17, 0.4); }
  70% { box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15), 0 0 0 12px rgba(17, 17, 17, 0); }
  100% { box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15), 0 0 0 0 rgba(17, 17, 17, 0); }
}
.fab--success{
  animation:fab-pulse 0.6s ease-out;
}

/* ==============================================================
   Dashboard - Bottom Sheet Modal
============================================================== */
.bottom-sheet-backdrop{
  position:fixed;
  inset:0;
  background:rgba(0, 0, 0, 0.4);
  z-index:200;
  opacity:0;
  visibility:hidden;
  transition:opacity 0.3s ease, visibility 0.3s ease;
  -webkit-tap-highlight-color:transparent;
}
.bottom-sheet-backdrop--open{
  opacity:1;
  visibility:visible;
}
.bottom-sheet{
  position:fixed;
  bottom:0;
  left:0;
  right:0;
  background:var(--surface);
  border-radius:16px 16px 0 0;
  z-index:201;
  transform:translateY(100%);
  transition:transform 0.3s cubic-bezier(0.32, 0.72, 0, 1);
  max-height:90vh;
  max-height:90dvh;
  overflow-y:auto;
  box-shadow:0 -4px 24px rgba(0, 0, 0, 0.15);
  padding-bottom:var(--safe-bottom);
}
.bottom-sheet--open{
  transform:translateY(0);
}
.bottom-sheet__handle{
  width:36px;
  height:4px;
  background:var(--border);
  border-radius:2px;
  margin:12px auto;
}
.bottom-sheet__header{
  padding:0 var(--space-4) var(--space-3);
  display:flex;
  justify-content:space-between;
  align-items:center;
}
.bottom-sheet__title{
  font-size:1.125rem;
  font-weight:600;
  color:var(--text);
  margin:0;
}
.bottom-sheet__close{
  width:32px;
  height:32px;
  border:none;
  background:var(--bg-light);
  border-radius:50%;
  cursor:pointer;
  display:flex;
  align-items:center;
  justify-content:center;
  color:var(--muted);
  transition:all 0.15s ease;
}
.bottom-sheet__close:hover{
  background:var(--border);
  color:var(--text);
}
.bottom-sheet__close svg{
  width:16px;
  height:16px;
  stroke:currentColor;
  stroke-width:2;
}
.bottom-sheet__content{
  padding:0 var(--space-4) var(--space-4);
}

/* Bottom sheet form overrides */
.bottom-sheet .form{
  box-shadow:none;
  border:none;
  border-radius:0;
}

/* ==============================================================
   Dashboard - Accordion (Collapsible sections)
============================================================== */
.accordion{
  background:var(--surface);
  border:1px solid var(--border);
  border-radius:var(--radius-card);
  overflow:hidden;
  box-shadow:var(--shadow-sm);
}
.accordion__trigger{
  width:100%;
  padding:var(--space-4);
  background:none;
  border:none;
  display:flex;
  justify-content:space-between;
  align-items:center;
  cursor:pointer;
  transition:background 0.15s ease;
}
.accordion__trigger:hover{
  background:var(--bg-light);
}
.accordion__title{
  font-size:1rem;
  font-weight:600;
  color:var(--text);
  margin:0;
}
.accordion__icon{
  width:20px;
  height:20px;
  stroke:var(--muted);
  stroke-width:2;
  fill:none;
  transition:transform 0.2s ease;
}
.accordion--open .accordion__icon{
  transform:rotate(180deg);
}
.accordion__content{
  max-height:0;
  overflow:hidden;
  transition:max-height 0.3s ease;
}
.accordion--open .accordion__content{
  max-height:2000px;
}
.accordion__body{
  padding:0 var(--space-4) var(--space-4);
  border-top:1px solid var(--line);
}

/* ==============================================================
   Dashboard - Transaction List
============================================================== */
.transactions-list{
  display:grid;
  gap:0;
}
.transaction{
  display:grid;
  gap:var(--space-2);
  padding:var(--space-3) 0;
  border-bottom:1px solid var(--line);
  grid-template-columns:auto 1fr auto auto;
  align-items:center;
  position:relative;
}
.transaction:last-child{
  border-bottom:none;
}
.transaction__icon{
  grid-area:icon;
  width:36px;
  height:36px;
  border-radius:50%;
  display:flex;
  align-items:center;
  justify-content:center;
  margin-right:var(--space-3);
}
.transaction__icon--expense{
  background:rgba(239, 68, 68, 0.1);
  color:#DC2626;
}
.transaction__icon--income{
  background:rgba(16, 185, 129, 0.1);
  color:#059669;
}
.transaction__icon svg{
  width:18px;
  height:18px;
  stroke:currentColor;
  stroke-width:2;
  fill:none;
}
.transaction__info{
  min-width:0;
}
.transaction__desc{
  font-weight:500;
  color:var(--text);
  overflow:hidden;
  text-overflow:ellipsis;
  white-space:nowrap;
}
.transaction__cat{
  font-size:0.8125rem;
  color:var(--muted);
}
.transaction__amount{
  font-weight:600;
  font-variant-numeric:tabular-nums;
  text-align:right;
}
.transaction__delete-form{
  display:contents;
}
.transaction__delete{
  width:32px;
  height:32px;
  border:none;
  background:transparent;
  color:var(--muted);
  cursor:pointer;
  display:flex;
  align-items:center;
  justify-content:center;
  border-radius:var(--radius);
  transition:all 0.15s ease;
  opacity:0.5;
}
.transaction__delete:hover{
  background:rgba(239, 68, 68, 0.1);
  color:#DC2626;
  opacity:1;
}
.transaction__delete svg{
  width:18px;
  height:18px;
  stroke:currentColor;
  stroke-width:2;
  fill:none;
}
.transaction__amount--expense{
  color:var(--text);
}
.transaction__amount--income{
  color:#059669;
}
.transaction__date{
  font-size:0.75rem;
  color:var(--muted);
}

/* ==============================================================
   Dashboard - Toast Notifications (positioned above FAB)
============================================================== */
.toast-container{
  position:fixed;
  bottom:calc(96px + var(--safe-bottom));
  left:50%;
  transform:translateX(-50%);
  z-index:300;
  display:flex;
  flex-direction:column;
  gap:var(--space-2);
  pointer-events:none;
  width:calc(100% - 32px);
  max-width:400px;
}
.toast{
  background:var(--text);
  color:var(--surface);
  padding:var(--space-3) var(--space-4);
  border-radius:12px;
  font-size:0.9375rem;
  font-weight:500;
  box-shadow:0 4px 12px rgba(0, 0, 0, 0.15);
  display:flex;
  align-items:center;
  gap:var(--space-3);
  pointer-events:auto;
  animation:toast-in 0.3s ease-out;
}
.toast--out{
  animation:toast-out 0.2s ease-in forwards;
}
@keyframes toast-in {
  from { transform: translateY(16px); opacity: 0; }
  to { transform: translateY(0); opacity: 1; }
}
@keyframes toast-out {
  from { transform: translateY(0); opacity: 1; }
  to { transform: translateY(16px); opacity: 0; }
}
.toast--success{
  background:#059669;
}
.toast--error{
  background:#DC2626;
}
.toast__message{
  flex:1;
}

/* ==============================================================
   Dashboard - Simplified Topbar (no tabs)
============================================================== */
.topbar--dashboard .topbar__nav{
  display:none;
}
@media (min-width:560px){
  .topbar--dashboard .topbar__inner{
    justify-content:center;
  }
}

/* ==============================================================
   Dashboard - Skeleton Loading
============================================================== */
.skeleton{
  background:linear-gradient(90deg, var(--bg-light) 25%, var(--border) 50%, var(--bg-light) 75%);
  background-size:200% 100%;
  animation:skeleton-loading 1.5s infinite;
  border-radius:var(--radius);
}
@keyframes skeleton-loading{
  0% { background-position: 200% 0; }
  100% { background-position: -200% 0; }
}

