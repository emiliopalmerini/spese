/* ==============================================================
   Base + variabili (Peso-style colors and design system)
============================================================== */
*, *::before, *::after { box-sizing: border-box; }
:root{
  --font: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
  
  /* Peso-inspired color system */
  --primary: #4F46E5;
  --primary-dark: #4338CA;
  --primary-light: #E0E7FF;
  --bg-light: #F9FAFB;
  --surface: #FFFFFF;
  --surface-2: #FFFFFF;
  --text: #1F2937;
  --muted: #6B7280;
  --line: #E5E7EB;
  --border: #D1D5DB;
  --accent: var(--primary);
  --accent-600: var(--primary);
  --accent-700: var(--primary-dark);
  --accent-contrast: #FFFFFF;
  --ring: 0 0 0 3px rgba(79, 70, 229, 0.1);
  
  /* Enhanced spacing and radius */
  --space-1: 4px; --space-2: 8px; --space-3: 12px; --space-4: 16px;
  --radius: 6px; --radius-card: 12px;
  --control-pad-y: 12px; --control-pad-x: 16px;
  --container-max: 720px;
  --safe-top: env(safe-area-inset-top,0px);
  --safe-bottom: env(safe-area-inset-bottom,0px);
  
  /* Shadows for modern look */
  --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
  --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
}

/* ==============================================================
   Layout e tipografia
============================================================== */
html,body{margin:0;padding:0;font-family:var(--font);background:var(--bg-light);color:var(--text);
  -webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;line-height:1.5;}
html{font-size:16px;}
.container{max-width:var(--container-max);margin-inline:auto;padding-inline:clamp(var(--space-3),4vw,var(--space-4));}
.page{padding:calc(var(--space-4)*2) 0 calc(var(--space-4)*2.5);}
.page__section{margin-top:var(--space-4);}
.page__title{
  font-size:clamp(1.5rem,4.5vw,2rem);
  line-height:1.2;
  margin:0 0 var(--space-4);
  letter-spacing:-.01em;
  font-weight:700;
  color:var(--text);
  text-align:center;
}

/* Focus visibile */
:where(a,button,input,select,textarea):focus-visible{outline:none;box-shadow:var(--ring);}

/* Motion */
@media (prefers-reduced-motion: reduce){*{animation:none!important;transition:none!important}}

/* ==============================================================
   Topbar
============================================================== */
.topbar{position:sticky;top:0;z-index:10;background:var(--bg-light);border-bottom:1px solid var(--border);padding-top:var(--safe-top);}
.topbar__inner{min-height:52px;display:flex;align-items:center;justify-content:space-between;gap:var(--space-2);padding-block:var(--space-2);}
.brand{font-weight:600;font-size:.95rem;letter-spacing:0;}
.topbar__nav{display:flex;gap:var(--space-3);align-items:center;}
.nav-link{color:var(--text);text-decoration:none;font-weight:500;padding:var(--space-2) var(--space-3);border-radius:var(--radius);transition:all 0.2s ease;}
.nav-link:hover{background:var(--primary-light);color:var(--primary);}

/* ==============================================================
   Form (Peso-style modern form components)
============================================================== */
.form{
  max-width:var(--container-max);
  margin:0 auto;
  background:var(--surface);
  border-radius:var(--radius-card);
  box-shadow:var(--shadow-md);
  border:1px solid var(--border);
  overflow:hidden;
}
.field{
  padding:var(--space-4) var(--space-4);
  border-bottom:1px solid var(--line);
}
.density-compact .field{padding:var(--space-3) var(--space-4);}
.field:last-child{border-bottom:0;}
.field label{
  display:block;
  font-size:0.875rem;
  font-weight:500;
  color:var(--text);
  margin-bottom:var(--space-2);
}

input,select,button{font-size:1rem;}
input,select{
  width:100%;
  padding:var(--control-pad-y) var(--control-pad-x);
  min-height:44px;
  background:var(--surface);
  border:2px solid var(--border);
  border-radius:var(--radius);
  color:var(--text);
  outline:none;
  transition:all 0.2s ease;
  font-size:1rem;
}
input:focus,select:focus{
  border-color:var(--accent-600);
  box-shadow:var(--ring);
}
input::placeholder{color:var(--muted);}

/* Numerici: togli spinner */
input[type="number"]{-moz-appearance:textfield;}
input[type="number"]::-webkit-outer-spin-button,
input[type="number"]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0;}

/* Layout campi responsive */
.field-group{display:grid;grid-template-columns:1fr;gap:0;}
@media (min-width:640px){.field-group{grid-template-columns:1fr 1fr;}}
.field--half{flex:1;}

/* Azioni responsive */
.actions{display:grid;grid-template-columns:1fr;gap:var(--space-2);margin:var(--space-2);}
@media (min-width:480px){.actions{grid-template-columns:auto auto;justify-content:start;}}

/* ==============================================================
   Bottoni (Peso-style modern buttons)
============================================================== */
.btn{
  appearance:none;
  cursor:pointer;
  border:2px solid var(--accent-600);
  padding:var(--control-pad-y) var(--control-pad-x);
  border-radius:var(--radius);
  font-weight:500;
  background:var(--surface);
  color:var(--accent-600);
  display:inline-flex;
  align-items:center;
  justify-content:center;
  gap:var(--space-2);
  min-height:44px;
  font-size:1rem;
  text-decoration:none;
  transition:all 0.2s ease;
}
.btn:hover{
  background:var(--primary-light);
  transform:translateY(-1px);
  box-shadow:var(--shadow-md);
}
.btn:active{
  transform:translateY(0);
  box-shadow:var(--shadow-sm);
}
.btn-primary{
  color:var(--accent-contrast);
  background:var(--accent-600);
  border-color:var(--accent-600);
}
.btn-primary:hover{
  background:var(--accent-700);
  border-color:var(--accent-700);
}
.btn-primary:active{
  filter:brightness(.98);
  transform:translateY(0);
}
.btn--block{width:100%}

/* ==============================================================
   Feedback (Peso-style modern alerts)
============================================================== */
.flash{margin:var(--space-4);min-height:1.5rem;}
.success{
  background-color:#F0FDF4;
  border:1px solid #10B981;
  border-left:4px solid #10B981;
  color:#166534;
  padding:var(--space-3) var(--control-pad-x);
  border-radius:var(--radius);
  font-weight:500;
}
.error{
  background-color:#FEF2F2;
  border:1px solid #EF4444;
  border-left:4px solid #EF4444;
  color:#991B1B;
  padding:var(--space-3) var(--control-pad-x);
  border-radius:var(--radius);
  font-weight:500;
}

/* ==============================================================
   htmx indicator
============================================================== */
.indicator{display:none;align-items:center;gap:8px;color:var(--muted);}
.htmx-request .indicator{display:inline-flex;}
.spinner{width:14px;height:14px;border-radius:999px;border:2px solid color-mix(in srgb,var(--muted) 30%, transparent);border-top-color:var(--accent);animation:spin .8s linear infinite;}
@keyframes spin{to{transform:rotate(360deg)}}

/* ==============================================================
   Caption
============================================================== */
.caption{font-size:.75rem;color:var(--muted);margin-top:4px;}

/* ==============================================================
   Temi accento
============================================================== */
.theme-emerald{--accent:#10b981;--accent-600:#059669;--accent-700:#047857;--accent-contrast:#ffffff;--ring:0 0 0 3px rgba(16,185,129,.28);}
.theme-teal{--accent:#14b8a6;--accent-600:#0d9488;--accent-700:#0f766e;--accent-contrast:#ffffff;--ring:0 0 0 3px rgba(20,184,166,.28);}
.theme-purple{--accent:#8b5cf6;--accent-600:#7c3aed;--accent-700:#6d28d9;--accent-contrast:#ffffff;--ring:0 0 0 3px rgba(139,92,246,.28);}
.theme-ink{--accent:#111111;--accent-600:#111111;--accent-700:#0a0a0a;--accent-contrast:#ffffff;--ring:0 0 0 2px rgba(17,17,17,.18);}

/* ==============================================================
   Densit√†
============================================================== */
.density-compact{
  --space-1:4px;--space-2:8px;--space-3:12px;--space-4:14px;
  --radius:8px;--radius-card:12px;--control-pad-y:8px;--control-pad-x:10px;
}
.density-comfortable{
  --space-1:8px;--space-2:12px;--space-3:16px;--space-4:22px;
  --radius:12px;--radius-card:16px;--control-pad-y:12px;--control-pad-x:16px;--container-max:840px;
}

/* ==============================================================
   Preset minimal
============================================================== */
.style-minimal{--radius:0px;--radius-card:0px;}
.style-minimal .card{box-shadow:none;}
.style-minimal .actions{gap:0;}
.style-minimal input,.style-minimal select,.style-minimal .btn,.style-minimal .success,.style-minimal .error{border-radius:0;}
.style-minimal input,.style-minimal select{background:var(--surface);}

/* ==============================================================
   Month overview (Peso-style modern card)
============================================================== */
.month-overview{
  background:var(--surface);
  border-radius:var(--radius-card);
  box-shadow:var(--shadow-md);
  border:1px solid var(--border);
  overflow:hidden;
}
.month-overview h2{
  margin:0;
  padding:var(--space-4);
  border-bottom:1px solid var(--line);
  font-size:1.125rem;
  font-weight:600;
  color:var(--text);
}
.month-overview .overview-body{padding:var(--space-4);}
.month-overview .total{
  padding:var(--space-3) 0;
  font-weight:600;
  font-size:1.125rem;
  color:var(--primary);
}
.month-overview .legend{
  color:var(--muted);
  font-size:0.875rem;
  margin-bottom:var(--space-3);
}
.month-overview .categories{border-top:1px solid var(--line);padding-top:var(--space-3);}
.month-overview .row{
  display:grid;
  grid-template-columns:1fr auto;
  align-items:center;
  padding:var(--space-3) 0;
}
.month-overview .row + .row{border-top:1px solid var(--line);}
.month-overview .row .name{color:var(--text);font-weight:500;}
.month-overview .row .amount{color:var(--text);font-variant-numeric:tabular-nums;font-weight:600;}
.month-overview .row.placeholder{color:var(--muted);}
.month-overview .row .bar{
  grid-column:1 / -1;
  height:6px;
  background:var(--line);
  margin-top:var(--space-2);
  border-radius:3px;
  overflow:hidden;
}
.month-overview .row .bar__fill{
  height:100%;
  background:var(--accent-600);
  border-radius:3px;
  transition:width 0.3s ease;
}
.month-overview .expenses{margin-top:var(--space-4);}
.month-overview .expenses h3{
  margin:var(--space-3) 0 var(--space-2);
  font-size:1rem;
  font-weight:600;
  color:var(--text);
}
.month-overview .expenses__list{display:grid;gap:var(--space-2);}

/* Card spesa: layout mobile-first a griglie (Peso-style) */
.month-overview .expense{
  display:grid;
  gap:var(--space-2);
  align-items:center;
  padding:var(--space-3) 0;
  border-bottom:2px dashed var(--line);
  grid-template-columns:1fr auto;
  grid-template-areas:
    "date amount"
    "desc amount"
    "cat  amount";
  transition:background-color 0.2s ease;
}
.month-overview .expense:hover{
  background-color:var(--bg-light);
  margin:0 calc(-1 * var(--space-4));
  padding-left:var(--space-4);
  padding-right:var(--space-4);
  border-radius:var(--radius);
}
.month-overview .expense__date{
  grid-area:date;
  color:var(--muted);
  font-variant-numeric:tabular-nums;
  font-size:0.875rem;
}
.month-overview .expense__desc{
  grid-area:desc;
  overflow:hidden;
  text-overflow:ellipsis;
  white-space:nowrap;
  font-weight:500;
  color:var(--text);
}
.month-overview .expense__cat{
  grid-area:cat;
  color:var(--muted);
  font-size:0.875rem;
}
.month-overview .expense__amt{
  grid-area:amount;
  font-weight:600;
  font-variant-numeric:tabular-nums;
  justify-self:end;
  color:var(--primary);
}
@media (min-width:560px){
  .month-overview .expense{
    grid-template-columns:64px 1fr auto auto;
    grid-template-areas:"date desc cat amount";
  }
}

/* ==============================================================
   Data Tables
============================================================== */
.data-table{
  width:100%;
  background:var(--surface);
  border-radius:var(--radius-card);
  box-shadow:var(--shadow-md);
  border:1px solid var(--border);
  overflow:hidden;
}
.data-table thead{
  background:var(--bg-light);
  border-bottom:2px solid var(--border);
}
.data-table th{
  padding:var(--space-3) var(--space-4);
  text-align:left;
  font-weight:600;
  font-size:0.875rem;
  color:var(--text);
  text-transform:uppercase;
  letter-spacing:0.025em;
}
.data-table tbody tr{
  border-bottom:1px solid var(--line);
  transition:background-color 0.2s ease;
}
.data-table tbody tr:hover{
  background:var(--bg-light);
}
.data-table tbody tr:last-child{
  border-bottom:none;
}
.data-table td{
  padding:var(--space-3) var(--space-4);
  color:var(--text);
}
.expense-description{font-weight:500;}
.expense-amount{font-weight:600;color:var(--primary);font-variant-numeric:tabular-nums;}
.expense-frequency{font-size:0.875rem;}
.expense-date{font-size:0.875rem;color:var(--muted);font-variant-numeric:tabular-nums;}
.expense-category{font-size:0.875rem;}
.category-badge{
  display:inline-block;
  padding:2px 8px;
  background:var(--primary-light);
  color:var(--primary);
  border-radius:var(--radius);
  font-weight:500;
  font-size:0.75rem;
  margin-right:var(--space-1);
}
.subcategory-badge{
  display:inline-block;
  padding:2px 8px;
  background:var(--bg-light);
  color:var(--muted);
  border-radius:var(--radius);
  font-size:0.75rem;
}
.expense-actions{
  white-space:nowrap;
}
.expense-actions .btn{
  margin-right:var(--space-2);
}

/* ==============================================================
   Button Variants
============================================================== */
.btn-secondary{
  background:var(--surface);
  color:var(--text);
  border:2px solid var(--border);
}
.btn-secondary:hover{
  background:var(--bg-light);
  border-color:var(--muted);
}
.btn-danger{
  background:#FEE2E2;
  color:#991B1B;
  border:2px solid #EF4444;
}
.btn-danger:hover{
  background:#EF4444;
  color:white;
  border-color:#DC2626;
}
.btn-sm{
  padding:6px 12px;
  font-size:0.875rem;
  min-height:32px;
}

/* ==============================================================
   Section Titles
============================================================== */
.section-title{
  font-size:1.25rem;
  font-weight:600;
  color:var(--text);
  margin:var(--space-4) 0;
  padding-bottom:var(--space-2);
  border-bottom:2px solid var(--line);
}

/* ==============================================================
   Empty State
============================================================== */
.empty-state{
  text-align:center;
  padding:calc(var(--space-4)*3) var(--space-4);
  background:var(--surface);
  border-radius:var(--radius-card);
  border:1px solid var(--border);
}
.empty-state p{
  margin:var(--space-2) 0;
}
.text-muted{
  color:var(--muted);
}

/* ==============================================================
   Recurrent Expenses - using same style as normal expenses
============================================================== */
.recurrent-expenses{
  background:var(--surface);
  border-radius:var(--radius-card);
  box-shadow:var(--shadow-md);
  border:1px solid var(--border);
  overflow:hidden;
  margin-top:var(--space-4);
}
.recurrent-expenses h2{
  margin:0;
  padding:var(--space-4);
  border-bottom:1px solid var(--line);
  font-size:1.125rem;
  font-weight:600;
  color:var(--text);
}
.recurrent-list{
  padding:var(--space-4);
  display:grid;
  gap:var(--space-2);
}

/* Recurrent expense item - same style as .month-overview .expense */
.recurrent-item{
  display:grid;
  gap:var(--space-2);
  align-items:center;
  padding:var(--space-3) 0;
  border-bottom:2px dashed var(--line);
  grid-template-columns:1fr auto auto;
  grid-template-areas:
    "freq  amount actions"
    "desc  amount actions"
    "cat   amount actions"
    "dates amount actions";
  transition:background-color 0.2s ease;
  position:relative;
}
.recurrent-item:hover{
  background-color:var(--bg-light);
  margin:0 calc(-1 * var(--space-4));
  padding-left:var(--space-4);
  padding-right:var(--space-4);
  padding-top:var(--space-3);
  padding-bottom:var(--space-3);
  border-radius:var(--radius);
}
.recurrent-item--editing:hover{
  margin:0 calc(-1 * var(--space-4));
  padding-left:var(--space-4);
  padding-right:var(--space-4);
  border-radius:var(--radius);
}
.recurrent-item:last-child{
  border-bottom:none;
}

/* Grid areas for recurrent expense data */
.recurrent-frequency{
  grid-area:freq;
  font-weight:500;
  color:var(--text);
  background:var(--bg-light);
  padding:2px 8px;
  border-radius:var(--radius);
  border:1px solid var(--border);
  font-size:0.875rem;
  width:fit-content;
}
.recurrent-description{
  grid-area:desc;
  overflow:hidden;
  text-overflow:ellipsis;
  white-space:nowrap;
  font-weight:500;
  color:var(--text);
  margin:0;
}
.recurrent-categories{
  grid-area:cat;
  color:var(--muted);
  font-size:0.875rem;
}
.recurrent-dates{
  grid-area:dates;
  color:var(--muted);
  font-variant-numeric:tabular-nums;
  font-size:0.875rem;
}
.recurrent-amount{
  grid-area:amount;
  font-weight:600;
  font-variant-numeric:tabular-nums;
  justify-self:end;
  color:var(--primary);
  font-size:1rem;
}

/* Action icons */
.recurrent-actions{
  grid-area:actions;
  display:flex;
  gap:var(--space-1);
  opacity:0;
  transition:opacity 0.2s ease;
  justify-self:end;
}
.recurrent-item:hover .recurrent-actions{
  opacity:1;
}

.action-icon{
  width:32px;
  height:32px;
  border:none;
  background:transparent;
  cursor:pointer;
  border-radius:var(--radius);
  padding:6px;
  transition:all 0.15s ease;
  display:flex;
  align-items:center;
  justify-content:center;
}
.action-icon:hover{
  background:var(--text);
  color:var(--surface);
}
.action-icon svg{
  width:20px;
  height:20px;
  stroke:currentColor;
  fill:none;
  stroke-width:2;
  stroke-linecap:round;
  stroke-linejoin:round;
}

/* Category styling */
.category-primary{
  font-weight:500;
  color:var(--text);
}
.category-separator{
  color:var(--muted);
  margin:0 4px;
}
.category-secondary{
  color:var(--muted);
}

/* Mobile responsive - same as normal expenses */
@media (min-width:560px){
  .recurrent-item{
    grid-template-columns:120px 1fr auto auto auto;
    grid-template-areas:"freq desc cat amount actions";
  }
  .recurrent-dates{
    display:none; /* Hide dates on desktop to save space */
  }
}

/* Mobile: show actions always */
@media (max-width: 559px) {
  .recurrent-actions{
    opacity:1;
    position:absolute;
    top:var(--space-1);
    right:0;
  }
  .action-icon{
    background:var(--bg-light);
    border:1px solid var(--border);
  }
}

/* ==============================================================
   Seamless Inline Editing - Maintains Row Layout
============================================================== */

/* Editing state - maintains grid layout */
.recurrent-item--editing{
  background:var(--bg-light) !important;
  border-color:var(--text) !important;
  border-width:2px !important;
  animation:editModeIn 0.2s ease-out;
  min-height:var(--space-16);
}
.recurrent-item--editing:hover{
  background:var(--bg-light) !important;
  border-color:var(--text) !important;
}

@keyframes editModeIn {
  from { background:var(--surface); border-color:var(--border); }
  to { background:var(--bg-light); border-color:var(--text); }
}

/* Form maintains exact grid layout - identical to normal row */
.recurrent-edit-inline{
  display:grid;
  gap:var(--space-2);
  align-items:center;
  padding:var(--space-3) 0;
  width:100%;
  grid-template-columns:1fr auto auto;
  grid-template-areas:
    "freq  amount actions"
    "desc  amount actions"
    "cat   amount actions"
    "dates amount actions";
  transition:all 0.2s ease;
  position:relative;
}

/* Editable frequency - looks like badge but is select */
.recurrent-frequency--editing{
  grid-area:freq;
  font-weight:500;
  color:var(--text);
  background:var(--surface);
  padding:2px 8px;
  border:1px solid var(--text);
  border-radius:var(--radius);
  font-size:0.875rem;
  width:fit-content;
  cursor:pointer;
  transition:all 0.15s ease;
}
.recurrent-frequency--editing:focus{
  outline:none;
  box-shadow:0 0 0 2px rgba(31, 41, 55, 0.1);
}

/* Editable description - invisible input that looks like text */
.recurrent-description--editing{
  grid-area:desc;
  background:transparent;
  border:none;
  border-bottom:1px dashed var(--muted);
  padding:2px 4px;
  font-weight:500;
  color:var(--text);
  font-size:inherit;
  font-family:inherit;
  width:100%;
  transition:all 0.15s ease;
}
.recurrent-description--editing:focus{
  outline:none;
  border-bottom-color:var(--text);
  border-bottom-style:solid;
  background:var(--surface);
}

/* Editable categories - inline selects */
.recurrent-categories--editing{
  grid-area:cat;
  display:flex;
  align-items:center;
  gap:4px;
  font-size:0.875rem;
}
.category-select{
  background:transparent;
  border:none;
  border-bottom:1px dashed var(--muted);
  padding:2px 4px;
  font-size:0.875rem;
  font-family:inherit;
  color:var(--text);
  cursor:pointer;
  transition:all 0.15s ease;
}
.category-primary--editing{
  font-weight:500;
}
.category-secondary--editing{
  color:var(--muted);
}
.category-select:focus{
  outline:none;
  border-bottom-color:var(--text);
  border-bottom-style:solid;
  background:var(--surface);
}

/* Editable dates - compact inline inputs */
.recurrent-dates--editing{
  grid-area:dates;
  display:flex;
  align-items:center;
  gap:var(--space-1);
  color:var(--muted);
  font-variant-numeric:tabular-nums;
  font-size:0.875rem;
  flex-wrap:wrap;
}
.date-label{
  font-size:0.8125rem;
  color:var(--muted);
}
.date-input{
  background:transparent;
  border:none;
  border-bottom:1px dashed var(--muted);
  padding:2px 4px;
  font-size:0.8125rem;
  font-family:inherit;
  color:var(--muted);
  width:90px;
  font-variant-numeric:tabular-nums;
  transition:all 0.15s ease;
}
.date-input:focus{
  outline:none;
  border-bottom-color:var(--text);
  border-bottom-style:solid;
  background:var(--surface);
  color:var(--text);
}
.date-input--optional{
  border-bottom-style:dotted;
  width:100px;
}
.date-endless{
  font-style:italic;
  color:var(--muted);
  font-size:0.8125rem;
}

/* Editable amount - maintains blue styling */
.recurrent-amount--editing{
  grid-area:amount;
  display:flex;
  align-items:center;
  font-weight:600;
  font-variant-numeric:tabular-nums;
  justify-self:end;
  color:var(--primary);
  font-size:1rem;
}
.amount-currency{
  color:var(--primary);
  font-weight:600;
  margin-right:2px;
}
.amount-input{
  background:transparent;
  border:none;
  border-bottom:1px dashed var(--primary);
  padding:2px 4px;
  color:var(--primary);
  font-weight:600;
  font-variant-numeric:tabular-nums;
  font-size:1rem;
  font-family:inherit;
  width:80px;
  text-align:right;
  transition:all 0.15s ease;
}
.amount-input:focus{
  outline:none;
  border-bottom-style:solid;
  background:var(--surface);
}

/* Enhanced edit actions - compact and refined */
.recurrent-actions--editing{
  grid-area:actions;
  display:flex;
  align-items:center;
  gap:var(--space-1);
  justify-self:end;
}

.edit-action-btn{
  width:28px;
  height:28px;
  border:1px solid var(--border);
  background:var(--surface);
  border-radius:var(--radius);
  cursor:pointer;
  display:flex;
  align-items:center;
  justify-content:center;
  transition:all 0.15s ease;
}
.edit-action-btn:hover{
  border-color:var(--text);
  transform:translateY(-1px);
  box-shadow:0 2px 8px rgba(0,0,0,0.1);
}

.edit-action-btn--save{
  background:var(--text);
  border-color:var(--text);
  color:var(--surface);
}
.edit-action-btn--save:hover{
  background:var(--muted);
  border-color:var(--muted);
}

.edit-action-btn--cancel{
  background:var(--surface);
  border-color:var(--muted);
  color:var(--muted);
}
.edit-action-btn--cancel:hover{
  background:var(--bg-light);
  color:var(--text);
  border-color:var(--text);
}

.edit-action-icon{
  width:16px;
  height:16px;
  stroke:currentColor;
  fill:none;
  stroke-width:2;
  stroke-linecap:round;
  stroke-linejoin:round;
}

/* Saving indicator */
.edit-saving-indicator{
  display:flex;
  align-items:center;
  margin-left:var(--space-1);
}
.saving-spinner{
  width:16px;
  height:16px;
  border:2px solid var(--line);
  border-top-color:var(--primary);
  border-radius:50%;
  animation:spin 1s linear infinite;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

/* Mobile responsive - stack vertically but maintain feel */
@media (min-width:560px){
  .recurrent-edit-inline{
    grid-template-columns:120px 1fr auto auto auto;
    grid-template-areas:"freq desc cat amount actions";
    width:100%;
  }
  .recurrent-dates--editing{
    display:none; /* Hide dates on desktop like normal view */
  }
}

/* Mobile: show actions always and make touch-friendly */
@media (max-width: 559px) {
  .recurrent-actions--editing{
    opacity:1;
    position:absolute;
    top:var(--space-1);
    right:var(--space-2);
  }
  .edit-action-btn{
    width:32px;
    height:32px;
    background:var(--bg-light);
    border-color:var(--border);
  }
  .recurrent-dates--editing{
    font-size:0.8125rem;
  }
  .date-input{
    width:70px;
    font-size:0.75rem;
  }
}

/* ==============================================================
   Scrollbar sottili
============================================================== */
*{scrollbar-width:thin;scrollbar-color:color-mix(in srgb,var(--muted) 40%, transparent) transparent;}
*::-webkit-scrollbar{height:8px;width:8px;}
*::-webkit-scrollbar-thumb{background:color-mix(in srgb,var(--muted) 40%, transparent);}
*::-webkit-scrollbar-track{background:transparent;}

