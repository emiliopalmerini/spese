/* ==============================================================
   Dashboard - Typography-first Layout
============================================================== */
.dashboard{
  display:flex;
  flex-direction:column;
  gap:var(--space-4);
}
.dashboard .page__section{
  margin-top:0;
}

/* Stat Hero - Dramatic hero number */
.stat-hero{
  padding:var(--space-6) 0;
  text-align:center;
}
.stat-hero__value{
  font-family:var(--font-display);
  font-size:var(--text-hero);
  font-weight:700;
  color:var(--text);
  font-variant-numeric:tabular-nums;
  letter-spacing:-0.04em;
  line-height:0.9;
  animation:count-up var(--duration-slow) var(--ease-out-expo) both;
}
@keyframes count-up{
  from{
    opacity:0;
    transform:translateY(20px);
  }
  to{
    opacity:1;
    transform:translateY(0);
  }
}
.stat-hero__label{
  font-family:var(--font-body);
  font-size:var(--text-xs);
  font-weight:600;
  text-transform:uppercase;
  letter-spacing:0.1em;
  color:var(--text-secondary);
  margin-top:var(--space-2);
}
.stat-hero__trend{
  display:inline-flex;
  align-items:center;
  gap:var(--space-1);
  font-family:var(--font-mono);
  font-size:var(--text-xs);
  font-weight:600;
  margin-top:var(--space-2);
  color:var(--text);
}
.stat-hero__trend--down::before{
  content:'↓';
  margin-right:2px;
}
.stat-hero__trend--up::before{
  content:'↑';
  margin-right:2px;
}
.stat-hero__trend--neutral{
  color:var(--text-secondary);
}
.stat-hero--empty .stat-hero__value{
  color:var(--gray-300);
}
.stat-hero__value--positive{
  color:var(--success);
}
.stat-hero__value--negative{
  color:var(--danger);
}

/* Stat Pills - Inline secondary stats */
.stat-pills{
  display:flex;
  gap:var(--space-6);
  padding:var(--space-4) 0;
  border-top:1px solid var(--border);
  justify-content:center;
}
.stat-pill{
  text-align:center;
}
.stat-pill__label{
  font-family:var(--font-body);
  font-size:var(--text-xs);
  font-weight:600;
  color:var(--text-secondary);
  text-transform:uppercase;
  letter-spacing:0.1em;
}
.stat-pill__value{
  font-family:var(--font-display);
  font-size:var(--text-xl);
  font-weight:700;
  color:var(--text);
  font-variant-numeric:tabular-nums;
  letter-spacing:-0.02em;
  margin-top:var(--space-1);
}
.stat-pill__value--positive{
  color:var(--black);
}
.stat-pill__value--negative{
  color:var(--black);
}

/* Stat pills mobile */
@media (max-width: 374px) {
  .stat-pills{
    flex-wrap:wrap;
    gap:var(--space-3);
  }
  .stat-pill{
    flex:1 1 45%;
    min-width:0;
  }
}

/* Categories Section */
.categories-section{
  padding:var(--space-4) 0;
  border-top:1px solid var(--border);
}
.section-header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:var(--space-3);
}
.section-header .section-title{
  margin:0;
}
.dashboard .section-title{
  font-family:var(--font-body);
  font-size:var(--text-xs);
  font-weight:600;
  color:var(--text-secondary);
  text-transform:uppercase;
  letter-spacing:0.1em;
  margin:0 0 var(--space-3);
  padding:0;
  border-bottom:none;
}
.period-chips{
  display:flex;
  gap:var(--space-1);
}
.period-chip{
  padding:var(--space-1) var(--space-2);
  font-family:var(--font-body);
  font-size:var(--text-xs);
  font-weight:600;
  text-transform:uppercase;
  letter-spacing:0.03em;
  color:var(--text-secondary);
  background:transparent;
  border:1px solid transparent;
  border-radius:0;
  cursor:pointer;
  transition:
    color var(--duration-fast) var(--ease-out-quart),
    border-color var(--duration-fast) var(--ease-out-quart);
}
.period-chip:hover{
  color:var(--text);
  border-color:var(--border);
}
.period-chip--active{
  color:var(--text);
  border-color:var(--black);
  background:transparent;
}
.categories-list{
  display:flex;
  flex-direction:column;
  gap:var(--space-3);
}
.category-row{
  display:flex;
  flex-direction:column;
  gap:var(--space-2);
  padding:var(--space-2) 0;
  animation:slide-in var(--duration-normal) var(--ease-out-expo) both;
}
.category-row:nth-child(1){animation-delay:0ms;}
.category-row:nth-child(2){animation-delay:50ms;}
.category-row:nth-child(3){animation-delay:100ms;}
.category-row:nth-child(4){animation-delay:150ms;}
.category-row:nth-child(5){animation-delay:200ms;}
.category-row__info{
  display:flex;
  justify-content:space-between;
  align-items:baseline;
  gap:var(--space-2);
}
.category-row__name{
  font-family:var(--font-body);
  font-size:var(--text-sm);
  font-weight:500;
  color:var(--text);
  text-transform:uppercase;
  letter-spacing:0.02em;
  min-width:0;
  overflow:hidden;
  text-overflow:ellipsis;
  white-space:nowrap;
}
.category-row__amount{
  font-family:var(--font-mono);
  font-size:var(--text-sm);
  font-weight:600;
  color:var(--text);
  font-variant-numeric:tabular-nums;
  flex-shrink:0;
}
.category-row__bar{
  height:2px;
  background:var(--gray-200);
  overflow:hidden;
}
.category-row__fill{
  height:100%;
  background:var(--black);
  transform-origin:left;
  animation:bar-grow var(--duration-slower) var(--ease-out-expo) both;
}
@keyframes bar-grow{
  from{transform:scaleX(0);}
  to{transform:scaleX(1);}
}

/* Recurrent Expenses List */
.recurrents-list{
  display:flex;
  flex-direction:column;
  gap:var(--space-3);
}
.recurrent-row{
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:var(--space-3);
  padding:var(--space-2) 0;
  border-bottom:1px solid var(--gray-100);
  transition:background var(--duration-fast) var(--ease-out-quart);
}
.recurrent-row:last-child{
  border-bottom:none;
}
.recurrent-row:hover{
  background:var(--gray-50);
}
@media (min-width: 375px) {
  .recurrent-row:hover{
    margin-inline:calc(var(--space-3) * -1);
    padding-inline:var(--space-3);
  }
}
.recurrent-row__info{
  display:flex;
  flex-direction:column;
  gap:2px;
  min-width:0;
}
.recurrent-row__name{
  font-family:var(--font-body);
  font-size:var(--text-sm);
  font-weight:500;
  color:var(--text);
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}
.recurrent-row__freq{
  font-family:var(--font-body);
  font-size:var(--text-xs);
  color:var(--text-secondary);
  text-transform:lowercase;
}
.recurrent-row__amount{
  font-family:var(--font-mono);
  font-size:var(--text-sm);
  font-weight:600;
  color:var(--text);
  font-variant-numeric:tabular-nums;
  flex-shrink:0;
}
.recurrent-row__actions{
  display:flex;
  gap:var(--space-1);
  opacity:0;
  transition:opacity var(--duration-fast) var(--ease-out-quart);
}
.recurrent-row:hover .recurrent-row__actions{
  opacity:1;
}
.recurrent-row__actions .action-icon{
  width:24px;
  height:24px;
  padding:4px;
}
.recurrent-row__actions .action-icon svg{
  width:16px;
  height:16px;
}

/* ==============================================================
   Dashboard - FAB Speed Dial
============================================================== */
.fab-container{
  position:fixed;
  bottom:calc(24px + var(--safe-bottom));
  right:24px;
  z-index:90;
  display:flex;
  flex-direction:column;
  align-items:flex-end;
}
.fab{
  width:56px;
  height:56px;
  border-radius:0;
  background:var(--black);
  color:var(--white);
  border:none;
  box-shadow:none;
  cursor:pointer;
  display:flex;
  align-items:center;
  justify-content:center;
  transition:transform var(--duration-fast) var(--ease-spring);
  -webkit-tap-highlight-color:transparent;
  touch-action:manipulation;
}
.fab:hover{
  transform:scale(1.05);
  box-shadow:none;
}
.fab:active{
  transform:scale(0.95);
}
.fab--hidden{
  transform:translateY(100px);
  opacity:0;
  pointer-events:none;
}
.fab__icon{
  width:24px;
  height:24px;
  stroke:currentColor;
  stroke-width:2.5;
  fill:none;
  transition:transform var(--duration-normal) var(--ease-out-expo);
}
.fab--open .fab__icon{
  transform:rotate(45deg);
}

/* FAB Speed Dial Actions */
.fab-actions{
  position:absolute;
  bottom:72px;
  right:0;
  display:flex;
  flex-direction:column;
  align-items:flex-end;
  gap:var(--space-3);
  opacity:0;
  visibility:hidden;
  transform:translateY(10px);
  transition:all var(--duration-normal) var(--ease-out-expo);
  pointer-events:none;
}
.fab-actions--open{
  opacity:1;
  visibility:visible;
  transform:translateY(0);
  pointer-events:auto;
}
.fab-action{
  display:flex;
  align-items:center;
  gap:var(--space-2);
}
.fab-action__btn{
  width:48px;
  height:48px;
  border-radius:0;
  background:var(--white);
  border:2px solid var(--black);
  box-shadow:none;
  cursor:pointer;
  display:flex;
  align-items:center;
  justify-content:center;
  transition:
    transform var(--duration-fast) var(--ease-spring),
    background var(--duration-fast) var(--ease-out-quart);
  color:var(--black);
}
.fab-action__btn:hover{
  background:var(--black);
  color:var(--white);
  transform:scale(1.05);
  box-shadow:none;
}
.fab-action__btn svg{
  width:20px;
  height:20px;
  stroke:currentColor;
  stroke-width:2;
  fill:none;
}
.fab-action__label{
  padding:var(--space-2) var(--space-3);
  background:var(--black);
  color:var(--white);
  border-radius:0;
  font-family:var(--font-body);
  font-size:var(--text-xs);
  font-weight:600;
  text-transform:uppercase;
  letter-spacing:0.05em;
  white-space:nowrap;
  box-shadow:none;
}

/* FAB Backdrop */
.fab-backdrop{
  position:fixed;
  inset:0;
  background:var(--backdrop);
  z-index:89;
  opacity:0;
  visibility:hidden;
  transition:all var(--duration-normal) var(--ease-out-quart);
}
.fab-backdrop--open{
  opacity:1;
  visibility:visible;
}

/* FAB pulse animation on success */
@keyframes fab-pulse {
  0% { transform: scale(1); }
  50% { transform: scale(1.1); }
  100% { transform: scale(1); }
}
.fab--success{
  animation:fab-pulse var(--duration-normal) var(--ease-spring);
}

/* ==============================================================
   Dashboard - Bottom Sheet Modal
============================================================== */
.bottom-sheet-backdrop{
  position:fixed;
  inset:0;
  background:var(--backdrop);
  z-index:200;
  opacity:0;
  visibility:hidden;
  transition:opacity var(--duration-slow) var(--ease-out-quart), visibility var(--duration-slow) var(--ease-out-quart);
  -webkit-tap-highlight-color:transparent;
}
.bottom-sheet-backdrop--open{
  opacity:1;
  visibility:visible;
}
.bottom-sheet{
  position:fixed;
  bottom:0;
  left:0;
  right:0;
  background:var(--white);
  border-top:2px solid var(--black);
  border-radius:0;
  z-index:201;
  transform:translateY(100%);
  transition:transform var(--duration-slow) var(--ease-out-expo);
  max-height:90vh;
  max-height:90dvh;
  overflow-y:auto;
  box-shadow:none;
  padding-bottom:var(--safe-bottom);
}
.bottom-sheet--open{
  transform:translateY(0);
}
.bottom-sheet__handle{
  width:48px;
  height:4px;
  background:var(--gray-300);
  margin:var(--space-3) auto;
}
.bottom-sheet__header{
  padding:0 var(--space-4) var(--space-3);
  display:flex;
  justify-content:space-between;
  align-items:center;
}
.bottom-sheet__title{
  font-family:var(--font-display);
  font-size:var(--text-xl);
  font-weight:700;
  letter-spacing:-0.02em;
  color:var(--text);
  margin:0;
}
.bottom-sheet__close{
  width:32px;
  height:32px;
  border:2px solid var(--border);
  background:var(--white);
  border-radius:0;
  cursor:pointer;
  display:flex;
  align-items:center;
  justify-content:center;
  color:var(--text-secondary);
  transition:all var(--duration-fast) var(--ease-out-quart);
}
.bottom-sheet__close:hover{
  background:var(--black);
  border-color:var(--black);
  color:var(--white);
}
.bottom-sheet__close svg{
  width:16px;
  height:16px;
  stroke:currentColor;
  stroke-width:2;
}
.bottom-sheet__content{
  padding:0 var(--space-4) var(--space-4);
}

/* ==============================================================
   Dashboard - Accordion (Collapsible sections)
============================================================== */
.accordion{
  border-top:1px solid var(--border);
  margin-top:var(--space-4);
}
.accordion__trigger{
  width:100%;
  padding:var(--space-4) 0;
  background:none;
  border:none;
  display:flex;
  justify-content:space-between;
  align-items:center;
  cursor:pointer;
  transition:color var(--duration-fast) var(--ease-out-quart);
}
.accordion__trigger:hover .accordion__title{
  color:var(--text);
}
.accordion__title{
  font-family:var(--font-body);
  font-size:var(--text-xs);
  font-weight:600;
  color:var(--text-secondary);
  text-transform:uppercase;
  letter-spacing:0.1em;
  margin:0;
}
.accordion__icon{
  width:16px;
  height:16px;
  stroke:var(--text-secondary);
  stroke-width:2;
  fill:none;
  transition:transform var(--duration-normal) var(--ease-out-expo);
}
.accordion--open .accordion__icon{
  transform:rotate(180deg);
}
.accordion__content{
  max-height:0;
  overflow:hidden;
  transition:max-height var(--duration-slow) var(--ease-out-expo);
}
.accordion--open .accordion__content{
  max-height:2000px;
}
.accordion__body{
  padding-bottom:var(--space-3);
}

/* ==============================================================
   Dashboard - Transaction List
============================================================== */
.transactions-list{
  display:flex;
  flex-direction:column;
}
.transaction{
  display:grid;
  gap:var(--space-3);
  padding:var(--space-3) 0;
  grid-template-columns:auto 1fr auto auto;
  align-items:center;
  border-bottom:1px solid var(--gray-100);
  transition:background var(--duration-fast) var(--ease-out-quart);
}
.transaction:last-child{
  border-bottom:none;
}
.transaction:hover{
  background:var(--gray-50);
  margin-inline:calc(var(--space-3) * -1);
  padding-inline:var(--space-3);
}
.transaction__icon{
  width:24px;
  height:24px;
  display:flex;
  align-items:center;
  justify-content:center;
  color:var(--text);
}
.transaction__icon svg{
  width:16px;
  height:16px;
  stroke:currentColor;
  stroke-width:2;
  fill:none;
}
.transaction__icon--income{
  color:var(--text);
}
.transaction__icon--expense{
  color:var(--text);
}
.transaction__info{
  min-width:0;
}
.transaction__desc{
  font-family:var(--font-body);
  font-size:var(--text-base);
  font-weight:500;
  color:var(--text);
  overflow:hidden;
  text-overflow:ellipsis;
  white-space:nowrap;
}
.transaction__cat{
  font-family:var(--font-body);
  font-size:var(--text-xs);
  color:var(--text-secondary);
  text-transform:uppercase;
  letter-spacing:0.03em;
}
.transaction__amount{
  font-family:var(--font-mono);
  font-size:var(--text-lg);
  font-weight:600;
  font-variant-numeric:tabular-nums;
  text-align:right;
  color:var(--text);
}
.transaction__delete-form{
  display:contents;
}
.transaction__delete{
  width:28px;
  height:28px;
  border:none;
  background:transparent;
  color:var(--text-secondary);
  cursor:pointer;
  display:flex;
  align-items:center;
  justify-content:center;
  border-radius:0;
  transition:all var(--duration-fast) var(--ease-out-quart);
  opacity:0.4;
}
.transaction__delete:hover{
  background:var(--gray-100);
  color:var(--text);
  opacity:1;
}
.transaction__delete svg{
  width:14px;
  height:14px;
  stroke:currentColor;
  stroke-width:2;
  fill:none;
}
.transaction__amount--expense{
  color:var(--text);
}
.transaction__amount--income{
  color:var(--text);
}
.transaction__date{
  font-family:var(--font-body);
  font-size:var(--text-xs);
  color:var(--text-secondary);
}

/* ==============================================================
   Dashboard - Skeleton Loading
============================================================== */
.skeleton{
  background:linear-gradient(
    90deg,
    var(--gray-100) 25%,
    var(--gray-200) 50%,
    var(--gray-100) 75%
  );
  background-size:200% 100%;
  animation:skeleton-loading 1.2s ease-in-out infinite;
  border-radius:0;
}
@keyframes skeleton-loading{
  0% { background-position: 200% 0; }
  100% { background-position: -200% 0; }
}

/* ==============================================================
   Dashboard - Enhanced Stats
============================================================== */

/* 3-column stat pills */
.stat-pills--three{
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:var(--space-4);
}
@media (max-width: 374px) {
  .stat-pills--three{
    grid-template-columns:1fr 1fr;
    gap:var(--space-3);
  }
  .stat-pills--three .stat-pill:last-child{
    grid-column:1 / -1;
    text-align:center;
  }
}

/* 2-column stat pills */
.stat-pills--two{
  display:grid;
  grid-template-columns:repeat(2,1fr);
  gap:var(--space-4);
}
@media (max-width: 374px) {
  .stat-pills--two{
    gap:var(--space-3);
  }
}

.stat-pill__value--percent{
  font-family:var(--font-display);
}

/* Stat Grid */
.stat-grid{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:var(--space-3);
  padding:var(--space-4) 0;
  border-top:1px solid var(--border);
}
@media (max-width: 319px) {
  .stat-grid{
    grid-template-columns:1fr;
  }
}
.stat-box{
  padding:var(--space-3);
  border:1px solid var(--border);
  background:var(--white);
  animation:stat-box-in var(--duration-normal) var(--ease-out-expo) both;
  transition:
    border-color var(--duration-fast) var(--ease-out-quart),
    transform var(--duration-fast) var(--ease-spring);
}
.stat-box:nth-child(1){animation-delay:0ms;}
.stat-box:nth-child(2){animation-delay:50ms;}
.stat-box:nth-child(3){animation-delay:100ms;}
.stat-box:nth-child(4){animation-delay:150ms;}
.stat-box:hover{
  border-color:var(--black);
  transform:translateY(-2px);
}
@keyframes stat-box-in{
  from{opacity:0;transform:translateY(8px);}
  to{opacity:1;transform:translateY(0);}
}
.stat-box__label{
  font-family:var(--font-body);
  font-size:var(--text-xs);
  font-weight:600;
  text-transform:uppercase;
  letter-spacing:0.1em;
  color:var(--text-secondary);
  margin-bottom:var(--space-1);
}
.stat-box__value{
  font-family:var(--font-display);
  font-size:var(--text-lg);
  font-weight:700;
  color:var(--text);
  letter-spacing:-0.02em;
}
.stat-box__value--mono{
  font-family:var(--font-mono);
}
.stat-box__arrow{
  margin-right:2px;
}

/* Velocity indicator */
.velocity{
  margin-top:var(--space-2);
}
.velocity-track{
  height:2px;
  background:var(--gray-200);
  position:relative;
}
.velocity-fill{
  height:100%;
  background:var(--black);
  animation:velocity-grow var(--duration-slower) var(--ease-out-expo) both;
  animation-delay:200ms;
}
@keyframes velocity-grow{
  from{width:0;}
}
.velocity-marker{
  position:absolute;
  top:-4px;
  width:2px;
  height:10px;
  background:var(--black);
  transform:translateX(-50%);
  animation:marker-pop var(--duration-normal) var(--ease-spring) both;
  animation-delay:400ms;
}
@keyframes marker-pop{
  from{opacity:0;transform:translateX(-50%) scaleY(0);}
  to{opacity:1;transform:translateX(-50%) scaleY(1);}
}
.velocity-label{
  font-family:var(--font-body);
  font-size:var(--text-xs);
  color:var(--text-secondary);
  margin-top:var(--space-2);
  text-transform:uppercase;
  letter-spacing:0.05em;
}
.velocity-label--on-track{color:var(--text);}
.velocity-label--ahead{color:var(--text);}
.velocity-label--behind{color:var(--text-secondary);}

/* Fixed/Variable ratio bar */
.ratio-bar{
  display:flex;
  align-items:center;
  gap:var(--space-2);
  margin-top:var(--space-2);
}
.ratio-track{
  flex:1;
  height:4px;
  background:var(--gray-200);
  display:flex;
}
.ratio-fixed{
  height:100%;
  background:var(--black);
  animation:ratio-grow var(--duration-slower) var(--ease-out-expo) both;
  animation-delay:250ms;
}
@keyframes ratio-grow{
  from{width:0;}
}
.ratio-variable{
  height:100%;
  background:var(--gray-300);
  flex:1;
}
.ratio-label{
  font-family:var(--font-mono);
  font-size:var(--text-xs);
  font-weight:600;
  color:var(--text);
  white-space:nowrap;
}

/* Category top-3 ranking */
.category-row--top .category-row__name::before{
  content:attr(data-rank);
  display:inline-flex;
  align-items:center;
  justify-content:center;
  width:16px;
  height:16px;
  font-family:var(--font-mono);
  font-size:var(--text-xs);
  font-weight:700;
  margin-right:var(--space-2);
  border:1px solid var(--black);
}

/* Recurrents summary */
.recurrents-summary{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding-bottom:var(--space-3);
  margin-bottom:var(--space-3);
  border-bottom:1px solid var(--gray-100);
}
.recurrents-summary__label{
  font-family:var(--font-body);
  font-size:var(--text-xs);
  color:var(--text-secondary);
  text-transform:uppercase;
  letter-spacing:0.05em;
}
.recurrents-summary__value{
  font-family:var(--font-mono);
  font-size:var(--text-base);
  font-weight:600;
  color:var(--text);
}

/* Projections */
.projections-grid{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:var(--space-4);
  margin-bottom:var(--space-4);
}
@media (max-width: 374px) {
  .projections-grid{
    grid-template-columns:1fr;
    gap:var(--space-3);
  }
}
.projection-stat{
  display:flex;
  flex-direction:column;
  gap:var(--space-1);
}
.projection-stat__label{
  font-family:var(--font-body);
  font-size:var(--text-xs);
  font-weight:600;
  text-transform:uppercase;
  letter-spacing:0.1em;
  color:var(--text-secondary);
}
.projection-stat__value{
  font-family:var(--font-display);
  font-size:var(--text-2xl);
  font-weight:700;
  color:var(--text);
  letter-spacing:-0.02em;
}
.forecast-section{
  padding-top:var(--space-4);
  border-top:1px solid var(--gray-100);
}
.forecast-note{
  font-family:var(--font-body);
  font-size:var(--text-xs);
  color:var(--text-secondary);
  margin-top:var(--space-1);
}

/* Desktop enhancements */
@media (min-width:560px){
  .stat-grid{gap:var(--space-4);}
  .stat-box{padding:var(--space-4);}
  .stat-pills--three{gap:var(--space-6);}
  .projections-grid{gap:var(--space-6);}
}
