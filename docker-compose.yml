services:
  spese:
    build: .
    image: spese:dev
    container_name: spese
    ports:
      - "${PORT:-8081}:8080"
    environment:
      - PORT=${PORT:-8080}
      - BASE_URL=${BASE_URL:-http://localhost:${PORT:-8080}}
      - DATA_BACKEND=${DATA_BACKEND:-memory}
      - GOOGLE_SPREADSHEET_ID=${GOOGLE_SPREADSHEET_ID:-}
      - GOOGLE_SHEET_NAME=${GOOGLE_SHEET_NAME:-Spese}
      - GOOGLE_CATEGORIES_SHEET_NAME=${GOOGLE_CATEGORIES_SHEET_NAME:-Categories}
      - GOOGLE_SUBCATEGORIES_SHEET_NAME=${GOOGLE_SUBCATEGORIES_SHEET_NAME:-Subcategories}
      # OAuth: choose file- or json-based (file requires mounting volume)
      - GOOGLE_OAUTH_CLIENT_FILE=${GOOGLE_OAUTH_CLIENT_FILE:-}
      - GOOGLE_OAUTH_TOKEN_FILE=${GOOGLE_OAUTH_TOKEN_FILE:-}
      - GOOGLE_OAUTH_CLIENT_JSON=${GOOGLE_OAUTH_CLIENT_JSON:-}
      - GOOGLE_OAUTH_TOKEN_JSON=${GOOGLE_OAUTH_TOKEN_JSON:-}
    # Uncomment volumes below if using file-based OAuth credentials inside container
    # volumes:
    #   - ./client.json:${GOOGLE_OAUTH_CLIENT_FILE:-/client.json}:ro
    #   - ./token.json:${GOOGLE_OAUTH_TOKEN_FILE:-/token.json}:ro
    restart: unless-stopped
